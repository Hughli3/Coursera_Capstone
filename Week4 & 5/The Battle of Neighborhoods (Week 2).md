# Opening a New Hotel in New York City, United State

## Peer-graded Assignment: Capstone Project - The Battle of Neighborhoods (Week 1)

## Table of contends
* [Introduction](#introduction )
* [About Data](#data)
* [Business Problem](#businessProblem)
* [Methodology](#methodology)
* [Analysis](#analysis)
* [Results and Discussion](#results)
* [Conclusion](#conclusion)
* [References](#references)

## Introduction <a name="introduction"></a>

For many tourists, traveling is a good way to relax. They can go shopping in local malls, admire cultural relics in museums, and enjoy local cuisine. The real estate industry also uses this trend to build more hotels in the city to cater to the needs of travelers. As a result, a large number of hotels were built in Manhattan. Of course, there are many commercial factors to consider when building a hotel. One of the most important factors is geographic location.

## Bussiness Problem <a name="bussinessProblem"></a> 
The objective of this capstone project is to analyze and select the best locations in Manhattan to open a new hotel mainly for travelers. The project aims to provide solutions to answer the business question: In New York City if a property developer wants to open a new hotel which mainly provides services to travelers, where would you recommend that they open it?
### Interested Audience
I think that property developers and tourists are interesting audiences. On the one hand, the property developers can get more profits from where to build hotels. On the other hand, tourists can also know where to live when they visit Manhattan.



## About Data <a name="data"></a> 

### To solve the problem, we will need the following data:
- List of Boroughs and neighborhoods of Manhattan with their geodata (latitude and longitude)
- List of Subway metro stations in Manhattan with their address location 
- Venues data, particularly data related to travelers, for each Manhattan neighborhood (that can be clustered)

### Data source:
- https://geo.nyu.edu/catalog/nyu_2451_34572
- Foursquare API

### How data will be used to solve the problem
1. The link above contains a list of neighborhoods in Manhattan, with a total of 5 boroughs and 306 neighborhoods. We will download it from that link. 
2. After that, we will use Foursquare API to get the venue data for those boroughs and neighborhoods.
3. We need to select our interested information from those data, because the API will provide a lot of categories of data. 
4. Then, data cleaning, data wrangling will be done by using multiple machine learning skills in this process.
5. Lastly, we will use K-means clustering and data visualization skills to show the result. 

## Methodology <a name="methodology"></a>
Firstly, we need to get the list of neighbourhoods in Manhattan. In this project, we use the data from this link (https://geo.nyu.edu/catalog/nyu_2451_34572).

## Analysis <a name="analysis"></a>


### Import packages


```python
import numpy as np
import pandas as pd 
import folium
from sklearn.cluster import KMeans
import requests # library to handle requests
from pandas.io.json import json_normalize
#!conda install -c conda-forge geopy --yes  
from geopy.geocoders import Nominatim # convert an address into latitude and longitude values
#!conda install -c conda-forge folium=0.5.0 --yes 
import folium # map rendering library
import os
# Matplotlib and associated plotting modules
import matplotlib.cm as cm
import matplotlib.colors as colors
import matplotlib.pyplot as plt
```

### Get Data from the link


```python

newyork_data = requests.get("https://cocl.us/new_york_dataset")
```


```python
newyork_data = newyork_data.json()
```


```python
neighborhoods_data = newyork_data['features']
neighborhoods_data[0]
```




    {'type': 'Feature',
     'id': 'nyu_2451_34572.1',
     'geometry': {'type': 'Point',
      'coordinates': [-73.84720052054902, 40.89470517661]},
     'geometry_name': 'geom',
     'properties': {'name': 'Wakefield',
      'stacked': 1,
      'annoline1': 'Wakefield',
      'annoline2': None,
      'annoline3': None,
      'annoangle': 0.0,
      'borough': 'Bronx',
      'bbox': [-73.84720052054902,
       40.89470517661,
       -73.84720052054902,
       40.89470517661]}}



### Create a map of Manhattan with those neighborhoods


```python
# define the dataframe columns
column_names = ['Borough', 'Neighborhood', 'Latitude', 'Longitude'] 

# instantiate the dataframe
neighborhoods = pd.DataFrame(columns=column_names)
```


```python
for data in neighborhoods_data:
    borough = neighborhood_name = data['properties']['borough'] 
    neighborhood_name = data['properties']['name']
        
    neighborhood_latlon = data['geometry']['coordinates']
    neighborhood_lat = neighborhood_latlon[1]
    neighborhood_lon = neighborhood_latlon[0]
    
    neighborhoods = neighborhoods.append({'Borough': borough,
                                          'Neighborhood': neighborhood_name,
                                          'Latitude': neighborhood_lat,
                                          'Longitude': neighborhood_lon}, ignore_index=True)
```


```python
manhattan_data = neighborhoods[neighborhoods['Borough'] == 'Manhattan'].reset_index(drop=True)
manhattan_data.head() 

```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Borough</th>
      <th>Neighborhood</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Manhattan</td>
      <td>Marble Hill</td>
      <td>40.876551</td>
      <td>-73.910660</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Manhattan</td>
      <td>Chinatown</td>
      <td>40.715618</td>
      <td>-73.994279</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Manhattan</td>
      <td>Washington Heights</td>
      <td>40.851903</td>
      <td>-73.936900</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Manhattan</td>
      <td>Inwood</td>
      <td>40.867684</td>
      <td>-73.921210</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Manhattan</td>
      <td>Hamilton Heights</td>
      <td>40.823604</td>
      <td>-73.949688</td>
    </tr>
  </tbody>
</table>
</div>




```python
address = 'Manhattan, NY'

geolocator = Nominatim(user_agent="ny_explorer")
location = geolocator.geocode(address)
latitude = location.latitude
longitude = location.longitude
print('The geograpical coordinate of Manhattan are {}, {}.'.format(latitude, longitude))
```

    The geograpical coordinate of Manhattan are 40.7896239, -73.9598939.
    


```python
# create map of Manhattan using latitude and longitude values
map_manhattan = folium.Map(location=[latitude, longitude], zoom_start=11)

# add markers to map
for lat, lng, label in zip(manhattan_data['Latitude'], manhattan_data['Longitude'], manhattan_data['Neighborhood']):
    label = folium.Popup(label, parse_html=True)
    folium.CircleMarker(
        [lat, lng],
        radius=5,
        popup=label,
        color='blue',
        fill=True,
        fill_color='#3186cc',
        fill_opacity=0.7,
        parse_html=False).add_to(map_manhattan)  
    
map_manhattan
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe src="about:blank" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" data-html=PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkgewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb2xpdW0tbWFwIiBpZD0ibWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5IiA+PC9kaXY+CiAgICAgICAgCjwvYm9keT4KPHNjcmlwdD4gICAgCiAgICAKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG51bGw7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcF9kMjczZDJkMDRmMDI0NTg0YjU4OTc2ZmY1Y2Q1NTJhOSA9IEwubWFwKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcF9kMjczZDJkMDRmMDI0NTg0YjU4OTc2ZmY1Y2Q1NTJhOScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyOiBbNDAuNzg5NjIzOSwtNzMuOTU5ODkzOV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEJvdW5kczogYm91bmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmxkQ29weUp1bXA6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfNjhiZDkwYzZkODkzNDI5MGI5MmIyYTY3NDk2OWE2YzAgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsCiAgICAgICAgICAgICAgICB7CiAgImF0dHJpYnV0aW9uIjogbnVsbCwKICAiZGV0ZWN0UmV0aW5hIjogZmFsc2UsCiAgIm1heFpvb20iOiAxOCwKICAibWluWm9vbSI6IDEsCiAgIm5vV3JhcCI6IGZhbHNlLAogICJzdWJkb21haW5zIjogImFiYyIKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzEwZjY2ZjZkYTg5YzQzM2RiYjJmOTBhMmMzNGY4ODNmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuODc2NTUwNzc4Nzk5NjQsLTczLjkxMDY1OTY1ODYyOTgxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U4YmIxM2Y2MWI3YjQyMzM4ZWE3YTMwYTdkZDM3MzFlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ExNDJmNGMwNzRiODRiOGFiOGZkZTJkMzkzZTk0MjJmID0gJCgnPGRpdiBpZD0iaHRtbF9hMTQyZjRjMDc0Yjg0YjhhYjhmZGUyZDM5M2U5NDIyZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TWFyYmxlIEhpbGw8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U4YmIxM2Y2MWI3YjQyMzM4ZWE3YTMwYTdkZDM3MzFlLnNldENvbnRlbnQoaHRtbF9hMTQyZjRjMDc0Yjg0YjhhYjhmZGUyZDM5M2U5NDIyZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xMGY2NmY2ZGE4OWM0MzNkYmIyZjkwYTJjMzRmODgzZi5iaW5kUG9wdXAocG9wdXBfZThiYjEzZjYxYjdiNDIzMzhlYTdhMzBhN2RkMzczMWUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDQ4NmYwNDJlMjJhNGIyODhhMmY4ZTIwMDc5YTYxZjMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43MTU2MTg0MjIzMTQzMiwtNzMuOTk0Mjc5MzYyNTU5NzhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjM4ZDU5ZDFjM2I2NDZmOGJlZGRkNGRhZTM2MTAyODkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNGJiYWU5ZTA0M2MyNDFkYWI3ZTg3MDEyOTFlYTJlMDAgPSAkKCc8ZGl2IGlkPSJodG1sXzRiYmFlOWUwNDNjMjQxZGFiN2U4NzAxMjkxZWEyZTAwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaGluYXRvd248L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2IzOGQ1OWQxYzNiNjQ2ZjhiZWRkZDRkYWUzNjEwMjg5LnNldENvbnRlbnQoaHRtbF80YmJhZTllMDQzYzI0MWRhYjdlODcwMTI5MWVhMmUwMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8wNDg2ZjA0MmUyMmE0YjI4OGEyZjhlMjAwNzlhNjFmMy5iaW5kUG9wdXAocG9wdXBfYjM4ZDU5ZDFjM2I2NDZmOGJlZGRkNGRhZTM2MTAyODkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzMzMDMyZGIwMWZkNDRkNzk0ZmMwZjMzNjIxMjk0ODUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC44NTE5MDI1MjU1NTMwNSwtNzMuOTM2OTAwMjc5ODUyMzRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMDBjNjJmY2E5NThhNDUzZWEyMDZkNTk2MDZkZmMyNjIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMWNkMzNkMTQ5OTQ2NDdiZTk2ZTQ3Njc4NDFjOTkwY2IgPSAkKCc8ZGl2IGlkPSJodG1sXzFjZDMzZDE0OTk0NjQ3YmU5NmU0NzY3ODQxYzk5MGNiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XYXNoaW5ndG9uIEhlaWdodHM8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzAwYzYyZmNhOTU4YTQ1M2VhMjA2ZDU5NjA2ZGZjMjYyLnNldENvbnRlbnQoaHRtbF8xY2QzM2QxNDk5NDY0N2JlOTZlNDc2Nzg0MWM5OTBjYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zMzMwMzJkYjAxZmQ0NGQ3OTRmYzBmMzM2MjEyOTQ4NS5iaW5kUG9wdXAocG9wdXBfMDBjNjJmY2E5NThhNDUzZWEyMDZkNTk2MDZkZmMyNjIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYmU4MmU2NzAxOWMyNGQ3NGEzNmJjNzQyZDI4NGE3Y2UgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC44Njc2ODM5NjQ0OTkxNSwtNzMuOTIxMjEwNDIyMDM4OTddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDJjYjNmYzQxODMxNDIzOGExMDM5YzhkMDIwNTEyMjYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYzU0OThmMjc5MzVlNGZhZTlkYzQwMGYyNjI2NzBkZjMgPSAkKCc8ZGl2IGlkPSJodG1sX2M1NDk4ZjI3OTM1ZTRmYWU5ZGM0MDBmMjYyNjcwZGYzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Jbndvb2Q8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QyY2IzZmM0MTgzMTQyMzhhMTAzOWM4ZDAyMDUxMjI2LnNldENvbnRlbnQoaHRtbF9jNTQ5OGYyNzkzNWU0ZmFlOWRjNDAwZjI2MjY3MGRmMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iZTgyZTY3MDE5YzI0ZDc0YTM2YmM3NDJkMjg0YTdjZS5iaW5kUG9wdXAocG9wdXBfZDJjYjNmYzQxODMxNDIzOGExMDM5YzhkMDIwNTEyMjYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzY2NGZmNTIyNjY0NDFjYzlkZmUzMWUxNjM4YzQzMDYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC44MjM2MDQyODQ4MTE5MzUsLTczLjk0OTY4NzkxODgzMzY2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzg4N2I5MmJiY2FhMzQ4ZTM4N2U4Yjk1NzFiN2E2Zjk4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2NiZDYwYjUzZTlkMzRjMDE5YTY1YTY5ODBlYTkwYzQ4ID0gJCgnPGRpdiBpZD0iaHRtbF9jYmQ2MGI1M2U5ZDM0YzAxOWE2NWE2OTgwZWE5MGM0OCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFtaWx0b24gSGVpZ2h0czwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfODg3YjkyYmJjYWEzNDhlMzg3ZThiOTU3MWI3YTZmOTguc2V0Q29udGVudChodG1sX2NiZDYwYjUzZTlkMzRjMDE5YTY1YTY5ODBlYTkwYzQ4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzM2NjRmZjUyMjY2NDQxY2M5ZGZlMzFlMTYzOGM0MzA2LmJpbmRQb3B1cChwb3B1cF84ODdiOTJiYmNhYTM0OGUzODdlOGI5NTcxYjdhNmY5OCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lYWM5NmIwZTkyYjA0N2ZiYmIxYzU3MDM3YzQ3MTI1OCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjgxNjkzNDQyOTQ5NzgsLTczLjk1NzM4NTM5MzUxODhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmY1NmI2MmQ2NmU0NDY1YTgyOWIzN2JlYzM4MjdmM2MgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjY1NDQ3NDQwOTA3NDY2NjgxY2UzNGQxZjdkMTg0MWMgPSAkKCc8ZGl2IGlkPSJodG1sX2I2NTQ0NzQ0MDkwNzQ2NjY4MWNlMzRkMWY3ZDE4NDFjIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NYW5oYXR0YW52aWxsZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMmY1NmI2MmQ2NmU0NDY1YTgyOWIzN2JlYzM4MjdmM2Muc2V0Q29udGVudChodG1sX2I2NTQ0NzQ0MDkwNzQ2NjY4MWNlMzRkMWY3ZDE4NDFjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2VhYzk2YjBlOTJiMDQ3ZmJiYjFjNTcwMzdjNDcxMjU4LmJpbmRQb3B1cChwb3B1cF8yZjU2YjYyZDY2ZTQ0NjVhODI5YjM3YmVjMzgyN2YzYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hMjcwZDY4OWY1YTk0Y2U1ODg5MzJiNzg4MmJlMWM5ZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjgxNTk3NjA2NzQyNDE0LC03My45NDMyMTExMjYwMzkwNV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kMjczZDJkMDRmMDI0NTg0YjU4OTc2ZmY1Y2Q1NTJhOSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jOTY2ZGVjY2M3Yzk0ZWNmOWQxOWU3MzJjNWI2YTAwMyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83ZWE1MDRiMjYyMDQ0MGM4OWVhYWJhMDc3YjI5MjViMSA9ICQoJzxkaXYgaWQ9Imh0bWxfN2VhNTA0YjI2MjA0NDBjODllYWFiYTA3N2IyOTI1YjEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNlbnRyYWwgSGFybGVtPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jOTY2ZGVjY2M3Yzk0ZWNmOWQxOWU3MzJjNWI2YTAwMy5zZXRDb250ZW50KGh0bWxfN2VhNTA0YjI2MjA0NDBjODllYWFiYTA3N2IyOTI1YjEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTI3MGQ2ODlmNWE5NGNlNTg4OTMyYjc4ODJiZTFjOWQuYmluZFBvcHVwKHBvcHVwX2M5NjZkZWNjYzdjOTRlY2Y5ZDE5ZTczMmM1YjZhMDAzKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzY0MTcxNWUxZmQ1MzQyMjc5YWExOTRmOWNhNzRhMTA1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzkyMjQ5NDY2NjMwMzMsLTczLjk0NDE4MjIzMTQ4NTI0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdhMDRhOWQ5M2ZmMzQ3Mzc4ZTZhMzY0OWEwMWM0YmI4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzE2NWRmNjFhNmEyZTRjOTFiM2FjMGRjOWFjZGYwZDZiID0gJCgnPGRpdiBpZD0iaHRtbF8xNjVkZjYxYTZhMmU0YzkxYjNhYzBkYzlhY2RmMGQ2YiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RWFzdCBIYXJsZW08L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdhMDRhOWQ5M2ZmMzQ3Mzc4ZTZhMzY0OWEwMWM0YmI4LnNldENvbnRlbnQoaHRtbF8xNjVkZjYxYTZhMmU0YzkxYjNhYzBkYzlhY2RmMGQ2Yik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82NDE3MTVlMWZkNTM0MjI3OWFhMTk0ZjljYTc0YTEwNS5iaW5kUG9wdXAocG9wdXBfN2EwNGE5ZDkzZmYzNDczNzhlNmEzNjQ5YTAxYzRiYjgpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMmQ3OTRkMjEzNzRlNDhkZmIxMGI2ZDBiY2YyZDNhNWIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43NzU2Mzg1NzMzMDE4MDUsLTczLjk2MDUwNzYzMTM1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2VlMmJjYjE3OGQ1NzRhYzQ5MWNhMGYyNDhhNzBmZjlhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzU3NGZhOTMwMTk5MDQ2NWNiYTg0ODBiYzNkMzY5ZWU4ID0gJCgnPGRpdiBpZD0iaHRtbF81NzRmYTkzMDE5OTA0NjVjYmE4NDgwYmMzZDM2OWVlOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VXBwZXIgRWFzdCBTaWRlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lZTJiY2IxNzhkNTc0YWM0OTFjYTBmMjQ4YTcwZmY5YS5zZXRDb250ZW50KGh0bWxfNTc0ZmE5MzAxOTkwNDY1Y2JhODQ4MGJjM2QzNjllZTgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMmQ3OTRkMjEzNzRlNDhkZmIxMGI2ZDBiY2YyZDNhNWIuYmluZFBvcHVwKHBvcHVwX2VlMmJjYjE3OGQ1NzRhYzQ5MWNhMGYyNDhhNzBmZjlhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Q5ZjYxZmUyYmQ0NDRkYjVhOTYwMDBmNjg3MWY1YTZjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzc1OTI5ODQ5ODg0ODc1LC03My45NDcxMTc4NDQ3MTgyNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kMjczZDJkMDRmMDI0NTg0YjU4OTc2ZmY1Y2Q1NTJhOSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82ZGY3N2MyZjAwYjY0ZGM0YWNlMDNjMDUxYTI0NGFmOSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84YzVlZDM2NWEzNmM0NDU3YjE4MDE4NDMxZmUyODg2YiA9ICQoJzxkaXYgaWQ9Imh0bWxfOGM1ZWQzNjVhMzZjNDQ1N2IxODAxODQzMWZlMjg4NmIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPllvcmt2aWxsZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNmRmNzdjMmYwMGI2NGRjNGFjZTAzYzA1MWEyNDRhZjkuc2V0Q29udGVudChodG1sXzhjNWVkMzY1YTM2YzQ0NTdiMTgwMTg0MzFmZTI4ODZiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Q5ZjYxZmUyYmQ0NDRkYjVhOTYwMDBmNjg3MWY1YTZjLmJpbmRQb3B1cChwb3B1cF82ZGY3N2MyZjAwYjY0ZGM0YWNlMDNjMDUxYTI0NGFmOSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hMjY0N2RjYjE0NTE0OWU1OGJlZWY5MmEyZGY0OGU1MCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc2ODExMjY1ODI4NzMzLC03My45NTg4NTk2ODgxMzc2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzc4YTk2ODY5ZDExODRlNDA5MzE1NzUwMmNhMWM5MjU3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzFmMDQ4N2MzZDQ2NzRkNTM5Y2M5MDk4MzNjYTdhMDhkID0gJCgnPGRpdiBpZD0iaHRtbF8xZjA0ODdjM2Q0Njc0ZDUzOWNjOTA5ODMzY2E3YTA4ZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGVub3ggSGlsbDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzhhOTY4NjlkMTE4NGU0MDkzMTU3NTAyY2ExYzkyNTcuc2V0Q29udGVudChodG1sXzFmMDQ4N2MzZDQ2NzRkNTM5Y2M5MDk4MzNjYTdhMDhkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2EyNjQ3ZGNiMTQ1MTQ5ZTU4YmVlZjkyYTJkZjQ4ZTUwLmJpbmRQb3B1cChwb3B1cF83OGE5Njg2OWQxMTg0ZTQwOTMxNTc1MDJjYTFjOTI1Nyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80ZTg4MjRmZDZhNDQ0NzA5YjgwZTc4MzZhZjc4MDliNyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc2MjE1OTYwNTc2MjgzLC03My45NDkxNjc2OTIyNzk1M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kMjczZDJkMDRmMDI0NTg0YjU4OTc2ZmY1Y2Q1NTJhOSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jMWE3YjUwZTIzN2M0YWEyYTVhOWEwMTAzZjU0ODQyOCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81NzY2ZDk0ZjI0ODM0MDY3OGQwMTEwZWIyNzAwMWUzYiA9ICQoJzxkaXYgaWQ9Imh0bWxfNTc2NmQ5NGYyNDgzNDA2NzhkMDExMGViMjcwMDFlM2IiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvb3NldmVsdCBJc2xhbmQ8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2MxYTdiNTBlMjM3YzRhYTJhNWE5YTAxMDNmNTQ4NDI4LnNldENvbnRlbnQoaHRtbF81NzY2ZDk0ZjI0ODM0MDY3OGQwMTEwZWIyNzAwMWUzYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80ZTg4MjRmZDZhNDQ0NzA5YjgwZTc4MzZhZjc4MDliNy5iaW5kUG9wdXAocG9wdXBfYzFhN2I1MGUyMzdjNGFhMmE1YTlhMDEwM2Y1NDg0MjgpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNDMyN2FkYjU1NGM1NDczM2I5NTI4OTMwMjg5ZTc0MWYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43ODc2NTc5OTg1MzQ4NTQsLTczLjk3NzA1OTIzNjMwNjAzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzMzNGFhY2E1NTExOTRiMGY4OWViNjZiZGY2N2NkN2RhID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzU4ZDc1YzM0NGQ2NjRiMTFhODM2MzdkZmE0OTRiNmU1ID0gJCgnPGRpdiBpZD0iaHRtbF81OGQ3NWMzNDRkNjY0YjExYTgzNjM3ZGZhNDk0YjZlNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VXBwZXIgV2VzdCBTaWRlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zMzRhYWNhNTUxMTk0YjBmODllYjY2YmRmNjdjZDdkYS5zZXRDb250ZW50KGh0bWxfNThkNzVjMzQ0ZDY2NGIxMWE4MzYzN2RmYTQ5NGI2ZTUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNDMyN2FkYjU1NGM1NDczM2I5NTI4OTMwMjg5ZTc0MWYuYmluZFBvcHVwKHBvcHVwXzMzNGFhY2E1NTExOTRiMGY4OWViNjZiZGY2N2NkN2RhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ZiZWU3ZTc4MjdkYTQ2ZGZiZjk4NDYwMTU4OTY0NWFhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzczNTI4ODg5NDIxNjYsLTczLjk4NTMzNzc3MDAxMjYyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzdkMTZmY2Q4MGJjYjRmNjY5ODY0ZmFiM2VlNWRkMDg5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzIzOWVlMWRmZGM5YTQ2ZjY5YTk4NWYyZDY5YzJjMTRkID0gJCgnPGRpdiBpZD0iaHRtbF8yMzllZTFkZmRjOWE0NmY2OWE5ODVmMmQ2OWMyYzE0ZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGluY29sbiBTcXVhcmU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzdkMTZmY2Q4MGJjYjRmNjY5ODY0ZmFiM2VlNWRkMDg5LnNldENvbnRlbnQoaHRtbF8yMzllZTFkZmRjOWE0NmY2OWE5ODVmMmQ2OWMyYzE0ZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9mYmVlN2U3ODI3ZGE0NmRmYmY5ODQ2MDE1ODk2NDVhYS5iaW5kUG9wdXAocG9wdXBfN2QxNmZjZDgwYmNiNGY2Njk4NjRmYWIzZWU1ZGQwODkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTQwYzAzMjY0NmUyNGRhMjljNjM0NGEzZDEyMzcyM2QgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43NTkxMDA4OTE0NjIxMiwtNzMuOTk2MTE5MzYzMDk0NzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfM2FjNWYwZjI4Njc3NDQyOWJmNTVlMWU1ZTljYThhOTYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTYwNDI5NTFmOGFlNDUwNGIzNWFkODk3MTZhM2VhOWYgPSAkKCc8ZGl2IGlkPSJodG1sX2E2MDQyOTUxZjhhZTQ1MDRiMzVhZDg5NzE2YTNlYTlmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DbGludG9uPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zYWM1ZjBmMjg2Nzc0NDI5YmY1NWUxZTVlOWNhOGE5Ni5zZXRDb250ZW50KGh0bWxfYTYwNDI5NTFmOGFlNDUwNGIzNWFkODk3MTZhM2VhOWYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTQwYzAzMjY0NmUyNGRhMjljNjM0NGEzZDEyMzcyM2QuYmluZFBvcHVwKHBvcHVwXzNhYzVmMGYyODY3NzQ0MjliZjU1ZTFlNWU5Y2E4YTk2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzMzMTYzMzNkNDA4YTQ1ZGY5NmMxNTRlZDU2ZGRkNTlkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzU0NjkxMTAyNzA2MjMsLTczLjk4MTY2ODgyNzMwMzA0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2NiNzI1M2Q2MzFjMTQ4MmM5YmQ4OTBkNmFlYjZkZDU4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2RmYzU3NjIyMDQyODQ3NjI4MDNlNWEwYzEyMzgxY2E0ID0gJCgnPGRpdiBpZD0iaHRtbF9kZmM1NzYyMjA0Mjg0NzYyODAzZTVhMGMxMjM4MWNhNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TWlkdG93bjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfY2I3MjUzZDYzMWMxNDgyYzliZDg5MGQ2YWViNmRkNTguc2V0Q29udGVudChodG1sX2RmYzU3NjIyMDQyODQ3NjI4MDNlNWEwYzEyMzgxY2E0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzMzMTYzMzNkNDA4YTQ1ZGY5NmMxNTRlZDU2ZGRkNTlkLmJpbmRQb3B1cChwb3B1cF9jYjcyNTNkNjMxYzE0ODJjOWJkODkwZDZhZWI2ZGQ1OCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jZDY3YzMxMmU2Mzg0MWVkYmE2NzNlNmFjN2M3ZTA0OCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc0ODMwMzA3NzI1MjE3NCwtNzMuOTc4MzMyMDc5MjQxMjddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmMxMTZmZDk5NDcwNDA3NGJlYWUxNzNmZWY3MjEzMzUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfN2FjY2M4Y2ZlYzkzNGM4Y2FkZDc1NGExODlkYjIyNTggPSAkKCc8ZGl2IGlkPSJodG1sXzdhY2NjOGNmZWM5MzRjOGNhZGQ3NTRhMTg5ZGIyMjU4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NdXJyYXkgSGlsbDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMmMxMTZmZDk5NDcwNDA3NGJlYWUxNzNmZWY3MjEzMzUuc2V0Q29udGVudChodG1sXzdhY2NjOGNmZWM5MzRjOGNhZGQ3NTRhMTg5ZGIyMjU4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2NkNjdjMzEyZTYzODQxZWRiYTY3M2U2YWM3YzdlMDQ4LmJpbmRQb3B1cChwb3B1cF8yYzExNmZkOTk0NzA0MDc0YmVhZTE3M2ZlZjcyMTMzNSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85MGU0ZTFhMWQzYTI0NTU4YTVkZDNkNWJhNDJmZTQ0NSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc0NDAzNDcwNjc0Nzk3NSwtNzQuMDAzMTE2MzM0NzI4MTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTY5ODRlZDRkMTkxNGRmZDk4MTIyYjJmNzMwZDkyY2UgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzA0NGMyZWEyZWQyNGI1NjhiNDYwZmMxZjM0NjRkODYgPSAkKCc8ZGl2IGlkPSJodG1sXzcwNDRjMmVhMmVkMjRiNTY4YjQ2MGZjMWYzNDY0ZDg2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaGVsc2VhPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85Njk4NGVkNGQxOTE0ZGZkOTgxMjJiMmY3MzBkOTJjZS5zZXRDb250ZW50KGh0bWxfNzA0NGMyZWEyZWQyNGI1NjhiNDYwZmMxZjM0NjRkODYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOTBlNGUxYTFkM2EyNDU1OGE1ZGQzZDViYTQyZmU0NDUuYmluZFBvcHVwKHBvcHVwXzk2OTg0ZWQ0ZDE5MTRkZmQ5ODEyMmIyZjczMGQ5MmNlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2JjNTkyZjUxY2FmNDRkNjY5NzEwY2ZkMTY4MWFjNjcyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzI2OTMyODg1MzYxMjgsLTczLjk5OTkxNDAyOTQ1OTAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU2MmJjNDJjZjNjZDQ0M2ZiNGQ2OGM5NjFjZjkwMzgwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ExYzdjMGRkMTVkMTQ2YzE5YThhOWNlNzMwZDU1ZmNjID0gJCgnPGRpdiBpZD0iaHRtbF9hMWM3YzBkZDE1ZDE0NmMxOWE4YTljZTczMGQ1NWZjYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R3JlZW53aWNoIFZpbGxhZ2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzU2MmJjNDJjZjNjZDQ0M2ZiNGQ2OGM5NjFjZjkwMzgwLnNldENvbnRlbnQoaHRtbF9hMWM3YzBkZDE1ZDE0NmMxOWE4YTljZTczMGQ1NWZjYyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iYzU5MmY1MWNhZjQ0ZDY2OTcxMGNmZDE2ODFhYzY3Mi5iaW5kUG9wdXAocG9wdXBfNTYyYmM0MmNmM2NkNDQzZmI0ZDY4Yzk2MWNmOTAzODApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNGMwZDRiMjAzMmU2NGM5Y2IyYTIwNzM2YTFiODkyM2EgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43Mjc4NDY3NzcyNzAyNDQsLTczLjk4MjIyNjE2NTA2NDE2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U3ZGI0ZWUwYmQzYzQ1NGViM2NjNzYwMzBhNGMzYWU2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzRjNDM1NWNhNTBkNjQwN2I5NTdiNjc3YzhjOTQ2MGYxID0gJCgnPGRpdiBpZD0iaHRtbF80YzQzNTVjYTUwZDY0MDdiOTU3YjY3N2M4Yzk0NjBmMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RWFzdCBWaWxsYWdlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lN2RiNGVlMGJkM2M0NTRlYjNjYzc2MDMwYTRjM2FlNi5zZXRDb250ZW50KGh0bWxfNGM0MzU1Y2E1MGQ2NDA3Yjk1N2I2NzdjOGM5NDYwZjEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNGMwZDRiMjAzMmU2NGM5Y2IyYTIwNzM2YTFiODkyM2EuYmluZFBvcHVwKHBvcHVwX2U3ZGI0ZWUwYmQzYzQ1NGViM2NjNzYwMzBhNGMzYWU2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2MxZWRjZGVmNWM2YjQ3MzhiNDZmYTlkZWQ1Y2QyMDgzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzE3ODA2NzQ4OTI3NjUsLTczLjk4MDg5MDMxOTk5MjkxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzkyZTBjM2Q5Nzk4ODRmNzE5OWRmZWMyNTNjMzA5MDFkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc4YTA5MGE3YzE2MzRlNWQ4ZGU3NDY3NDYzMGUzMWQ1ID0gJCgnPGRpdiBpZD0iaHRtbF83OGEwOTBhN2MxNjM0ZTVkOGRlNzQ2NzQ2MzBlMzFkNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TG93ZXIgRWFzdCBTaWRlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85MmUwYzNkOTc5ODg0ZjcxOTlkZmVjMjUzYzMwOTAxZC5zZXRDb250ZW50KGh0bWxfNzhhMDkwYTdjMTYzNGU1ZDhkZTc0Njc0NjMwZTMxZDUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzFlZGNkZWY1YzZiNDczOGI0NmZhOWRlZDVjZDIwODMuYmluZFBvcHVwKHBvcHVwXzkyZTBjM2Q5Nzk4ODRmNzE5OWRmZWMyNTNjMzA5MDFkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2U2ZTk5NzdmMGE2YjRlNGFhZDkxMDBlMDljNzJhMDY0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzIxNTIxOTY3NDQzMjE2LC03NC4wMTA2ODMyODU1OTA4N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kMjczZDJkMDRmMDI0NTg0YjU4OTc2ZmY1Y2Q1NTJhOSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yMjE0NDE5ZTRkNGU0ZWI4OWRhMzM0MmVmNGIxYzY1OSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lODM3YzE5ZGUxMjQ0ZTBlOTk4MDRiYWZmNGI2ZDYxYiA9ICQoJzxkaXYgaWQ9Imh0bWxfZTgzN2MxOWRlMTI0NGUwZTk5ODA0YmFmZjRiNmQ2MWIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRyaWJlY2E8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzIyMTQ0MTllNGQ0ZTRlYjg5ZGEzMzQyZWY0YjFjNjU5LnNldENvbnRlbnQoaHRtbF9lODM3YzE5ZGUxMjQ0ZTBlOTk4MDRiYWZmNGI2ZDYxYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lNmU5OTc3ZjBhNmI0ZTRhYWQ5MTAwZTA5YzcyYTA2NC5iaW5kUG9wdXAocG9wdXBfMjIxNDQxOWU0ZDRlNGViODlkYTMzNDJlZjRiMWM2NTkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzM1YTcwMjk5NzRmNGU0OWFhZTQ0OGFmZjBlNjlmZDAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43MTkzMjM3OTM5NTkwNywtNzMuOTk3MzA0NjcyMDgwNzNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzBhNDlkYzU2ZDhmNGI0Mzg1ZGI1Y2M5YjlmMzJkOGQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZWM5YWFlY2M2MTE1NGIyZDllYzgxNjAxYjBkZmQxNmQgPSAkKCc8ZGl2IGlkPSJodG1sX2VjOWFhZWNjNjExNTRiMmQ5ZWM4MTYwMWIwZGZkMTZkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5MaXR0bGUgSXRhbHk8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzMwYTQ5ZGM1NmQ4ZjRiNDM4NWRiNWNjOWI5ZjMyZDhkLnNldENvbnRlbnQoaHRtbF9lYzlhYWVjYzYxMTU0YjJkOWVjODE2MDFiMGRmZDE2ZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83MzVhNzAyOTk3NGY0ZTQ5YWFlNDQ4YWZmMGU2OWZkMC5iaW5kUG9wdXAocG9wdXBfMzBhNDlkYzU2ZDhmNGI0Mzg1ZGI1Y2M5YjlmMzJkOGQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZThkZjQ5YTcxYmI5NDEzMDg1ODljNDQ3NDc3MjhmYmYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43MjIxODM4NDEzMTc5NCwtNzQuMDAwNjU2NjY5NTk3NTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYzMzMjU3MTFmODEyNDI0OWI0NjJlZDY4NmZhZGNhMjIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2RhM2FiZWI3MjdhNDE5ZTkzZmViNzdjZDg1MThmZTkgPSAkKCc8ZGl2IGlkPSJodG1sX2NkYTNhYmViNzI3YTQxOWU5M2ZlYjc3Y2Q4NTE4ZmU5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Tb2hvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jMzMyNTcxMWY4MTI0MjQ5YjQ2MmVkNjg2ZmFkY2EyMi5zZXRDb250ZW50KGh0bWxfY2RhM2FiZWI3MjdhNDE5ZTkzZmViNzdjZDg1MThmZTkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZThkZjQ5YTcxYmI5NDEzMDg1ODljNDQ3NDc3MjhmYmYuYmluZFBvcHVwKHBvcHVwX2MzMzI1NzExZjgxMjQyNDliNDYyZWQ2ODZmYWRjYTIyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzI3Y2NkMTFhYzZlZTRiN2FiYTRmNDczNzIyMmQ0OGI0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzM0NDMzOTM1NzI0MzQsLTc0LjAwNjE3OTk4MTI2ODEyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2MyMzVhMGQ0NmJjYTQ3OGM4Y2Q0NGZjZDg0OWY0ZWM0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2U4NTdhZTlhZjYyYzQ5M2JiZmI1ZDgwN2M2ZWE1OTA2ID0gJCgnPGRpdiBpZD0iaHRtbF9lODU3YWU5YWY2MmM0OTNiYmZiNWQ4MDdjNmVhNTkwNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V2VzdCBWaWxsYWdlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jMjM1YTBkNDZiY2E0NzhjOGNkNDRmY2Q4NDlmNGVjNC5zZXRDb250ZW50KGh0bWxfZTg1N2FlOWFmNjJjNDkzYmJmYjVkODA3YzZlYTU5MDYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMjdjY2QxMWFjNmVlNGI3YWJhNGY0NzM3MjIyZDQ4YjQuYmluZFBvcHVwKHBvcHVwX2MyMzVhMGQ0NmJjYTQ3OGM4Y2Q0NGZjZDg0OWY0ZWM0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2M2OGE5ODZjYjk5YTQ4NzFhMDNmZDllNDY1ZTcyYTkwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzk3MzA3MDQxNzAyODY1LC03My45NjQyODYxNzc0MDY1NV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kMjczZDJkMDRmMDI0NTg0YjU4OTc2ZmY1Y2Q1NTJhOSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zMTNkYmM5NDQwODE0MjAxOTJmYmQxNWRhM2U0MjQ1OSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kNGYxNWMzMWU0MzE0NjJjOGNhMDQyN2RmYzNjOTAwMyA9ICQoJzxkaXYgaWQ9Imh0bWxfZDRmMTVjMzFlNDMxNDYyYzhjYTA0MjdkZmMzYzkwMDMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1hbmhhdHRhbiBWYWxsZXk8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzMxM2RiYzk0NDA4MTQyMDE5MmZiZDE1ZGEzZTQyNDU5LnNldENvbnRlbnQoaHRtbF9kNGYxNWMzMWU0MzE0NjJjOGNhMDQyN2RmYzNjOTAwMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jNjhhOTg2Y2I5OWE0ODcxYTAzZmQ5ZTQ2NWU3MmE5MC5iaW5kUG9wdXAocG9wdXBfMzEzZGJjOTQ0MDgxNDIwMTkyZmJkMTVkYTNlNDI0NTkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDZjMDZhZTA3ODNiNDdmOWI4N2E0NGNmZTJlNmVlZDcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC44MDc5OTk3MzgxNjU4MjYsLTczLjk2Mzg5NjI3OTA1MzMyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2ZiYTRhZTlmYjk2NDRjZmFhZDk2YTEzMGRkMThkMDY3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQyZDJhNzQ4ODczNjRmYTNiNjY3Njk0M2M0MGY5MjU0ID0gJCgnPGRpdiBpZD0iaHRtbF80MmQyYTc0ODg3MzY0ZmEzYjY2NzY5NDNjNDBmOTI1NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TW9ybmluZ3NpZGUgSGVpZ2h0czwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmJhNGFlOWZiOTY0NGNmYWFkOTZhMTMwZGQxOGQwNjcuc2V0Q29udGVudChodG1sXzQyZDJhNzQ4ODczNjRmYTNiNjY3Njk0M2M0MGY5MjU0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzA2YzA2YWUwNzgzYjQ3ZjliODdhNDRjZmUyZTZlZWQ3LmJpbmRQb3B1cChwb3B1cF9mYmE0YWU5ZmI5NjQ0Y2ZhYWQ5NmExMzBkZDE4ZDA2Nyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80N2E2MjAyNjZhYjI0OTJiODQ1ODRiNzc3MTA0NjQ0OSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjczNzIwOTgzMjcxNSwtNzMuOTgxMzc1OTQ4MzM1NDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjE0YmM1NzhmOTc2NDNhYTlkNDc5NWNiOTQ2OTk5ZmUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTgwNDVkMTliOWMwNDY0Njk4ZWFmZWUxN2M0MWE5NWEgPSAkKCc8ZGl2IGlkPSJodG1sX2E4MDQ1ZDE5YjljMDQ2NDY5OGVhZmVlMTdjNDFhOTVhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HcmFtZXJjeTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZjE0YmM1NzhmOTc2NDNhYTlkNDc5NWNiOTQ2OTk5ZmUuc2V0Q29udGVudChodG1sX2E4MDQ1ZDE5YjljMDQ2NDY5OGVhZmVlMTdjNDFhOTVhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzQ3YTYyMDI2NmFiMjQ5MmI4NDU4NGI3NzcxMDQ2NDQ5LmJpbmRQb3B1cChwb3B1cF9mMTRiYzU3OGY5NzY0M2FhOWQ0Nzk1Y2I5NDY5OTlmZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lNTBhN2QxY2NjNjg0N2Q0YWJhZDk4MThkNTAzYmZmMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjcxMTkzMTk4Mzk0NTY1LC03NC4wMTY4NjkzMDUwODYxN10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kMjczZDJkMDRmMDI0NTg0YjU4OTc2ZmY1Y2Q1NTJhOSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9hYTE1NWFmNjc5NGI0YWVmYmU0YjZmMGJjOGIwZjU3NiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80YzZiOTk3ZDdjYTc0NDgzYmM4ZTNmYzI0ZWRmN2YxOCA9ICQoJzxkaXYgaWQ9Imh0bWxfNGM2Yjk5N2Q3Y2E3NDQ4M2JjOGUzZmMyNGVkZjdmMTgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJhdHRlcnkgUGFyayBDaXR5PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hYTE1NWFmNjc5NGI0YWVmYmU0YjZmMGJjOGIwZjU3Ni5zZXRDb250ZW50KGh0bWxfNGM2Yjk5N2Q3Y2E3NDQ4M2JjOGUzZmMyNGVkZjdmMTgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTUwYTdkMWNjYzY4NDdkNGFiYWQ5ODE4ZDUwM2JmZjAuYmluZFBvcHVwKHBvcHVwX2FhMTU1YWY2Nzk0YjRhZWZiZTRiNmYwYmM4YjBmNTc2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzI0YTc3ZDU3ZjA4ODRiNWJiM2FlMmI1MWU0NTcxNzBhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzA3MTA3MTA3MjcwNDgsLTc0LjAxMDY2NTQ0NTIxMjddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMDY3NTk4MjgyNzNiNGE2NGJiZGYwMGMwYjZkMjcwYzUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDlkZWVlYTM1MTU5NGU0MDhiZGU2ZWZjMjhkMTEyNTcgPSAkKCc8ZGl2IGlkPSJodG1sX2Q5ZGVlZWEzNTE1OTRlNDA4YmRlNmVmYzI4ZDExMjU3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GaW5hbmNpYWwgRGlzdHJpY3Q8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzA2NzU5ODI4MjczYjRhNjRiYmRmMDBjMGI2ZDI3MGM1LnNldENvbnRlbnQoaHRtbF9kOWRlZWVhMzUxNTk0ZTQwOGJkZTZlZmMyOGQxMTI1Nyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yNGE3N2Q1N2YwODg0YjViYjNhZTJiNTFlNDU3MTcwYS5iaW5kUG9wdXAocG9wdXBfMDY3NTk4MjgyNzNiNGE2NGJiZGYwMGMwYjZkMjcwYzUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDAzOTE1N2I3OTE3NDA3YzllMTQ2N2U1N2NkYTY3NmMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43ODI2ODI1NjcxMjU3LC03My45NTMyNTY0NjgzNzExMl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9kMjczZDJkMDRmMDI0NTg0YjU4OTc2ZmY1Y2Q1NTJhOSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wY2YxYmNlOTMxMzY0ZmM0YjhhZWQ2MjM4MTg3MTZmNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lNGM5YmQyNzQzZDY0MGQ1YjBiYTViYmJlM2Q0MjllNiA9ICQoJzxkaXYgaWQ9Imh0bWxfZTRjOWJkMjc0M2Q2NDBkNWIwYmE1YmJiZTNkNDI5ZTYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNhcm5lZ2llIEhpbGw8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzBjZjFiY2U5MzEzNjRmYzRiOGFlZDYyMzgxODcxNmY0LnNldENvbnRlbnQoaHRtbF9lNGM5YmQyNzQzZDY0MGQ1YjBiYTViYmJlM2Q0MjllNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kMDM5MTU3Yjc5MTc0MDdjOWUxNDY3ZTU3Y2RhNjc2Yy5iaW5kUG9wdXAocG9wdXBfMGNmMWJjZTkzMTM2NGZjNGI4YWVkNjIzODE4NzE2ZjQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYWViMzhjYTEyODgyNDQ3NThjN2QyNDQ5NWVkN2I3MjQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43MjMyNTkwMTg4NTc2OCwtNzMuOTg4NDMzNjgwMjM1OTddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMGE2MmRkNzk5MzNjNDc3ZWE0NTExZTM1MTEzYTZkNTkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOWNjM2ViYWM1YmQyNDJjZTkwMWU5MDMxMzYzYzhiOTYgPSAkKCc8ZGl2IGlkPSJodG1sXzljYzNlYmFjNWJkMjQyY2U5MDFlOTAzMTM2M2M4Yjk2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ob2hvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wYTYyZGQ3OTkzM2M0NzdlYTQ1MTFlMzUxMTNhNmQ1OS5zZXRDb250ZW50KGh0bWxfOWNjM2ViYWM1YmQyNDJjZTkwMWU5MDMxMzYzYzhiOTYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYWViMzhjYTEyODgyNDQ3NThjN2QyNDQ5NWVkN2I3MjQuYmluZFBvcHVwKHBvcHVwXzBhNjJkZDc5OTMzYzQ3N2VhNDUxMWUzNTExM2E2ZDU5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQ4ZTAxMTJiZGMxYzQ1MjRiY2UxZTI1ZDM3NGFhYWEyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzE1MjI4OTIwNDYyODIsLTc0LjAwNTQxNTI5ODczMzU1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU2NTc4MDczMTg0ZDQ0NDJiNGI4NmQ2NWRjYjEzYjMxID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2IyNTk5NmQ3YTIzMzQ1MTFhY2VjNTc5NDFjZWZmMGJmID0gJCgnPGRpdiBpZD0iaHRtbF9iMjU5OTZkN2EyMzM0NTExYWNlYzU3OTQxY2VmZjBiZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2l2aWMgQ2VudGVyPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81NjU3ODA3MzE4NGQ0NDQyYjRiODZkNjVkY2IxM2IzMS5zZXRDb250ZW50KGh0bWxfYjI1OTk2ZDdhMjMzNDUxMWFjZWM1Nzk0MWNlZmYwYmYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNDhlMDExMmJkYzFjNDUyNGJjZTFlMjVkMzc0YWFhYTIuYmluZFBvcHVwKHBvcHVwXzU2NTc4MDczMTg0ZDQ0NDJiNGI4NmQ2NWRjYjEzYjMxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Q1MmFiNTlmMWUzODRkMjY5NmQwMjg1ZjgzZjNjNzhkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzQ4NTA5NjY0MzEyMiwtNzMuOTg4NzEzMTMyODUyNDddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDdjNTgwYjcxYmYwNDkwZGFjMDk3Yjk0MGZkYzNiMTYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfN2ViMzhkNzQ0YWZkNGE4Yzg0ZDZiZjZhMmI5NmM0ODcgPSAkKCc8ZGl2IGlkPSJodG1sXzdlYjM4ZDc0NGFmZDRhOGM4NGQ2YmY2YTJiOTZjNDg3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NaWR0b3duIFNvdXRoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kN2M1ODBiNzFiZjA0OTBkYWMwOTdiOTQwZmRjM2IxNi5zZXRDb250ZW50KGh0bWxfN2ViMzhkNzQ0YWZkNGE4Yzg0ZDZiZjZhMmI5NmM0ODcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDUyYWI1OWYxZTM4NGQyNjk2ZDAyODVmODNmM2M3OGQuYmluZFBvcHVwKHBvcHVwX2Q3YzU4MGI3MWJmMDQ5MGRhYzA5N2I5NDBmZGMzYjE2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQ0OTZiNjZlMTVlNjRlMjA4MTgzODY1Y2JhODQ1ODZmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzYwMjgwMzMxMzEzNzQsLTczLjk2MzU1NjE0MDk0MzAzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2Q1Nzc4NzMzYTkzYjRlN2VhZmI5YTUyMzVhODQ2ZTBmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2UwODA4Nzc0MzRhMDQzZmViY2RlMDY1YjFmNDczNWJkID0gJCgnPGRpdiBpZD0iaHRtbF9lMDgwODc3NDM0YTA0M2ZlYmNkZTA2NWIxZjQ3MzViZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U3V0dG9uIFBsYWNlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kNTc3ODczM2E5M2I0ZTdlYWZiOWE1MjM1YTg0NmUwZi5zZXRDb250ZW50KGh0bWxfZTA4MDg3NzQzNGEwNDNmZWJjZGUwNjViMWY0NzM1YmQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNDQ5NmI2NmUxNWU2NGUyMDgxODM4NjVjYmE4NDU4NmYuYmluZFBvcHVwKHBvcHVwX2Q1Nzc4NzMzYTkzYjRlN2VhZmI5YTUyMzVhODQ2ZTBmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzJkZjI3MmU1ZGU4MzRjZTM4ZTQ4YzZiNGE2MmMyZWIyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzUyMDQyMzY5NTA3MjIsLTczLjk2NzcwODI0NTgxODM0XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzhmNDBkMmFhMTZhMTRlODk5MmJiYWQxN2Y0OTU3NzIzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2IxYjI4NjliYzA2MDQ4OTFhMTUzYjkzMGEyMzQzNjQ2ID0gJCgnPGRpdiBpZD0iaHRtbF9iMWIyODY5YmMwNjA0ODkxYTE1M2I5MzBhMjM0MzY0NiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VHVydGxlIEJheTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOGY0MGQyYWExNmExNGU4OTkyYmJhZDE3ZjQ5NTc3MjMuc2V0Q29udGVudChodG1sX2IxYjI4NjliYzA2MDQ4OTFhMTUzYjkzMGEyMzQzNjQ2KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzJkZjI3MmU1ZGU4MzRjZTM4ZTQ4YzZiNGE2MmMyZWIyLmJpbmRQb3B1cChwb3B1cF84ZjQwZDJhYTE2YTE0ZTg5OTJiYmFkMTdmNDk1NzcyMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iODAzOTMzMjJkZjA0ODhhOWIwZWY5YTJlY2YwYzYxYiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc0NjkxNzQxMDc0MDE5NSwtNzMuOTcxMjE5Mjg3MjIyNjVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfN2JiODYxMDk0NjVjNGI0M2EwZjAzZDE1YzM1YmExYTUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjM5OGI2NDI1OTQyNDRiZTk3ODdlYmE3ZWM3MWI2NWUgPSAkKCc8ZGl2IGlkPSJodG1sX2YzOThiNjQyNTk0MjQ0YmU5Nzg3ZWJhN2VjNzFiNjVlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UdWRvciBDaXR5PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF83YmI4NjEwOTQ2NWM0YjQzYTBmMDNkMTVjMzViYTFhNS5zZXRDb250ZW50KGh0bWxfZjM5OGI2NDI1OTQyNDRiZTk3ODdlYmE3ZWM3MWI2NWUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjgwMzkzMzIyZGYwNDg4YTliMGVmOWEyZWNmMGM2MWIuYmluZFBvcHVwKHBvcHVwXzdiYjg2MTA5NDY1YzRiNDNhMGYwM2QxNWMzNWJhMWE1KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzAzMWFkYTc4OGYyMTRjNjdhMGQ0MDk0YzcwZWQ1MjE2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzMwOTk5NTU0NzcwNjEsLTczLjk3NDA1MTcwNDY5MjAzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzFhNjJhMWRkZjY3MjRkMjI5NDRhYzBmYjVkZmYzOWFiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzcxMjQ0MzM3YjI0MjRjYmFhOTNmMTE1MzU2YWEwNjM1ID0gJCgnPGRpdiBpZD0iaHRtbF83MTI0NDMzN2IyNDI0Y2JhYTkzZjExNTM1NmFhMDYzNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U3R1eXZlc2FudCBUb3duPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xYTYyYTFkZGY2NzI0ZDIyOTQ0YWMwZmI1ZGZmMzlhYi5zZXRDb250ZW50KGh0bWxfNzEyNDQzMzdiMjQyNGNiYWE5M2YxMTUzNTZhYTA2MzUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDMxYWRhNzg4ZjIxNGM2N2EwZDQwOTRjNzBlZDUyMTYuYmluZFBvcHVwKHBvcHVwXzFhNjJhMWRkZjY3MjRkMjI5NDRhYzBmYjVkZmYzOWFiKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2E2ZmQ3Njg2NDNhOTQ1N2Y5YzQ4YWYxZmY5YjQ3NDU1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzM5NjczMDQ3NjM4NDI2LC03My45OTA5NDcxMDUyODI2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2QyNzNkMmQwNGYwMjQ1ODRiNTg5NzZmZjVjZDU1MmE5KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2U4Y2I2NmE3YzQxMTQ2ZGU5OTY1MWQyYzIxODg1NjhiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2QyMDZmMTIzYjc0NTQzZWI4NzFhNTY5NGM3MmI1NDU5ID0gJCgnPGRpdiBpZD0iaHRtbF9kMjA2ZjEyM2I3NDU0M2ViODcxYTU2OTRjNzJiNTQ1OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RmxhdGlyb248L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U4Y2I2NmE3YzQxMTQ2ZGU5OTY1MWQyYzIxODg1NjhiLnNldENvbnRlbnQoaHRtbF9kMjA2ZjEyM2I3NDU0M2ViODcxYTU2OTRjNzJiNTQ1OSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hNmZkNzY4NjQzYTk0NTdmOWM0OGFmMWZmOWI0NzQ1NS5iaW5kUG9wdXAocG9wdXBfZThjYjY2YTdjNDExNDZkZTk5NjUxZDJjMjE4ODU2OGIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNWI3NTllNzUwYjc2NGE2MmE3ZThlNmIzMDZlMTlmMWMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43NTY2NTgwODIyNzUxOSwtNzQuMDAwMTExMzYyMDI2MzddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZDI3M2QyZDA0ZjAyNDU4NGI1ODk3NmZmNWNkNTUyYTkpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzE0YWFjMGYyZTBjNGQ3Zjk4ZjUwODc0OWM0MTdhMjkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDQzMDM4ZWViODhjNDM5MGI1NDA3ZGExNzBkZWY0MTYgPSAkKCc8ZGl2IGlkPSJodG1sX2Q0MzAzOGVlYjg4YzQzOTBiNTQwN2RhMTcwZGVmNDE2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IdWRzb24gWWFyZHM8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzMxNGFhYzBmMmUwYzRkN2Y5OGY1MDg3NDljNDE3YTI5LnNldENvbnRlbnQoaHRtbF9kNDMwMzhlZWI4OGM0MzkwYjU0MDdkYTE3MGRlZjQxNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81Yjc1OWU3NTBiNzY0YTYyYTdlOGU2YjMwNmUxOWYxYy5iaW5kUG9wdXAocG9wdXBfMzE0YWFjMGYyZTBjNGQ3Zjk4ZjUwODc0OWM0MTdhMjkpOwoKICAgICAgICAgICAgCiAgICAgICAgCjwvc2NyaXB0Pg== onload="this.contentDocument.open();this.contentDocument.write(atob(this.getAttribute('data-html')));this.contentDocument.close();" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>



### Use the forsquare API to explore the neighborhoods


```python
CLIENT_ID = "Id" # your Foursquare ID
CLIENT_SECRET = "S" # your Foursquare Secret
VERSION = '20180605' # Foursquare API version

print('Your credentails:')
print('CLIENT_ID: ' + CLIENT_ID)
print('CLIENT_SECRET:' + CLIENT_SECRET)
```

    Your credentails:
    CLIENT_ID: Id
    CLIENT_SECRET:S
    

#### Find venues that are within a radius of 2000 meters


```python
neighborhood_latitude = manhattan_data.loc[0, 'Latitude'] # neighborhood latitude value
neighborhood_longitude = manhattan_data.loc[0, 'Longitude'] # neighborhood longitude value

neighborhood_name = manhattan_data.loc[0, 'Neighborhood'] # neighborhood name

print('Latitude and longitude values of {} are {}, {}.'.format(neighborhood_name, 
                                                               neighborhood_latitude, 
                                                               neighborhood_longitude))
```

    Latitude and longitude values of Marble Hill are 40.87655077879964, -73.91065965862981.
    


```python
LIMIT = 300 # limit of number of venues returned by Foursquare API
radius = 1000 # 1000 meters
url = 'https://api.foursquare.com/v2/venues/explore?&client_id={}&client_secret={}&v={}&ll={},{}&radius={}&limit={}'.format(
    CLIENT_ID, 
    CLIENT_SECRET, 
    VERSION, 
    neighborhood_latitude, 
    neighborhood_longitude, 
    radius, 
    LIMIT)
```


```python
results = requests.get(url).json()
results
```




    primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4b6b4bf7f964a520f1fe2be3-63'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4dffff6952b10e7477997ee5',
           'name': 'Stairing Is Caring',
           'location': {'address': '215th and Broadway',
            'lat': 40.86977743640557,
            'lng': -73.9166900555486,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.86977743640557,
              'lng': -73.9166900555486}],
            'distance': 908,
            'postalCode': '10034',
            'cc': 'US',
            'city': 'New York',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['215th and Broadway',
             'New York, NY 10034',
             'United States']},
           'categories': [{'id': '4bf58dd8d48988d159941735',
             'name': 'Trail',
             'pluralName': 'Trails',
             'shortName': 'Trail',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/parks_outdoors/hikingtrail_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4dffff6952b10e7477997ee5-64'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4bca371e68f976b0bbf25e83',
           'name': 'Stop & Shop',
           'location': {'address': '5716 Broadway',
            'crossStreet': 'W 234th St',
            'lat': 40.882048,
            'lng': -73.9021108,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.882048,
              'lng': -73.9021108},
             {'label': 'entrance', 'lat': 40.882281, 'lng': -73.901367}],
            'distance': 944,
            'postalCode': '10463',
            'cc': 'US',
            'city': 'Bronx',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['5716 Broadway (W 234th St)',
             'Bronx, NY 10463',
             'United States']},
           'categories': [{'id': '52f2ab2ebcbc57f1066b8b46',
             'name': 'Supermarket',
             'pluralName': 'Supermarkets',
             'shortName': 'Supermarket',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/shops/food_grocery_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4bca371e68f976b0bbf25e83-65'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4b5b1c66f964a520d6e328e3',
           'name': 'Twin Donut',
           'location': {'address': '5099 Broadway',
            'crossStreet': 'W 218th St.',
            'lat': 40.87107675577189,
            'lng': -73.91447407600472,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.87107675577189,
              'lng': -73.91447407600472},
             {'label': 'entrance', 'lat': 40.871077, 'lng': -73.914634}],
            'distance': 688,
            'postalCode': '10034',
            'cc': 'US',
            'city': 'New York',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['5099 Broadway (W 218th St.)',
             'New York, NY 10034',
             'United States']},
           'categories': [{'id': '4bf58dd8d48988d148941735',
             'name': 'Donut Shop',
             'pluralName': 'Donut Shops',
             'shortName': 'Donuts',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/food/donuts_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []},
           'venuePage': {'id': '200652853'}},
          'referralId': 'e-0-4b5b1c66f964a520d6e328e3-66'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4caefda81168a093f6581e23',
           'name': 'Baker Fields Home Of The Lions',
           'location': {'lat': 40.87210666901573,
            'lng': -73.9147667725546,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.87210666901573,
              'lng': -73.9147667725546}],
            'distance': 603,
            'postalCode': '10468',
            'cc': 'US',
            'city': 'Bronx',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['Bronx, NY 10468', 'United States']},
           'categories': [{'id': '4f4528bc4b90abdf24c9de85',
             'name': 'Athletics & Sports',
             'pluralName': 'Athletics & Sports',
             'shortName': 'Athletics & Sports',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/shops/sports_outdoors_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4caefda81168a093f6581e23-67'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4bdc9e9b2a3a0f47d9abb3b6',
           'name': "Ben's Market Basket",
           'location': {'address': '19 Knolls Cres',
            'lat': 40.878591047927394,
            'lng': -73.9174855636529,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.878591047927394,
              'lng': -73.9174855636529}],
            'distance': 617,
            'postalCode': '10463',
            'cc': 'US',
            'city': 'Bronx',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['19 Knolls Cres',
             'Bronx, NY 10463',
             'United States']},
           'categories': [{'id': '4bf58dd8d48988d118951735',
             'name': 'Grocery Store',
             'pluralName': 'Grocery Stores',
             'shortName': 'Grocery Store',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/shops/food_grocery_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4bdc9e9b2a3a0f47d9abb3b6-68'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4e3448cd6284ea7e10f38a0f',
           'name': 'Caridad Spanish Restaurant',
           'location': {'lat': 40.871832496774495,
            'lng': -73.90670025930685,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.871832496774495,
              'lng': -73.90670025930685}],
            'distance': 622,
            'cc': 'US',
            'state': 'New York',
            'country': 'United States',
            'formattedAddress': ['New York', 'United States']},
           'categories': [{'id': '4bf58dd8d48988d150941735',
             'name': 'Spanish Restaurant',
             'pluralName': 'Spanish Restaurants',
             'shortName': 'Spanish',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/food/spanish_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4e3448cd6284ea7e10f38a0f-69'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4b034ed1f964a5207c4e22e3',
           'name': 'Dick Savitt Tennis Center',
           'location': {'address': '575 W 218th St',
            'lat': 40.8738453170954,
            'lng': -73.91739084305824,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.8738453170954,
              'lng': -73.91739084305824},
             {'label': 'entrance', 'lat': 40.874057, 'lng': -73.916757}],
            'distance': 641,
            'postalCode': '10034',
            'cc': 'US',
            'city': 'New York',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['575 W 218th St',
             'New York, NY 10034',
             'United States']},
           'categories': [{'id': '4e39a956bd410d7aed40cbc3',
             'name': 'Tennis Court',
             'pluralName': 'Tennis Courts',
             'shortName': 'Tennis Court',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/arts_entertainment/stadium_tennis_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4b034ed1f964a5207c4e22e3-70'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4dd2d1bf81dcfc9dcdc203ef',
           'name': 'MTA Bus Operations Depot - Kingsbridge',
           'location': {'address': '4055 9th Av',
            'lat': 40.87042048915926,
            'lng': -73.91276309333877,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.87042048915926,
              'lng': -73.91276309333877}],
            'distance': 705,
            'postalCode': '10034',
            'cc': 'US',
            'city': 'New York',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['4055 9th Av',
             'New York, NY 10034',
             'United States']},
           'categories': [{'id': '4bf58dd8d48988d1fe931735',
             'name': 'Bus Station',
             'pluralName': 'Bus Stations',
             'shortName': 'Bus Station',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/travel/busstation_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4dd2d1bf81dcfc9dcdc203ef-71'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '5083fe69e4b03db17714dd37',
           'name': 'Bike MS New York City - Inwood Hill Rest Stop',
           'location': {'lat': 40.87283852562406,
            'lng': -73.91930224528193,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.87283852562406,
              'lng': -73.91930224528193}],
            'distance': 836,
            'postalCode': '10034',
            'cc': 'US',
            'city': 'New York',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['New York, NY 10034', 'United States']},
           'categories': [{'id': '4bf58dd8d48988d163941735',
             'name': 'Park',
             'pluralName': 'Parks',
             'shortName': 'Park',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/parks_outdoors/park_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-5083fe69e4b03db17714dd37-72'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4c22bc3cfbe5c9b6f4769a21',
           'name': 'Arlington Avenue & West 232nd Street',
           'location': {'address': 'Arlington Ave',
            'crossStreet': 'at W 232nd St',
            'lat': 40.88401563216687,
            'lng': -73.91252232171007,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.88401563216687,
              'lng': -73.91252232171007}],
            'distance': 845,
            'cc': 'US',
            'city': 'Bronx',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['Arlington Ave (at W 232nd St)',
             'Bronx, NY',
             'United States']},
           'categories': [{'id': '52f2ab2ebcbc57f1066b8b4c',
             'name': 'Intersection',
             'pluralName': 'Intersections',
             'shortName': 'Intersection',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/travel/default_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4c22bc3cfbe5c9b6f4769a21-73'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '51699e4f498e31f5f19c4390',
           'name': '215th Street Subway Stop (1 Line)',
           'location': {'address': '215th Street and Broadway',
            'lat': 40.8698809,
            'lng': -73.9158577,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.8698809,
              'lng': -73.9158577}],
            'distance': 861,
            'cc': 'US',
            'city': 'New York',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['215th Street and Broadway',
             'New York, NY',
             'United States']},
           'categories': [{'id': '4bf58dd8d48988d1fd931735',
             'name': 'Metro Station',
             'pluralName': 'Metro Stations',
             'shortName': 'Metro',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/travel/subway_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-51699e4f498e31f5f19c4390-74'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4e2ce957b61cd010838538ef',
           'name': 'Spuyten Duyvil Creek',
           'location': {'address': 'Bakers Field',
            'crossStreet': 'W.218 St',
            'lat': 40.87362586210354,
            'lng': -73.9201633990417,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.87362586210354,
              'lng': -73.9201633990417}],
            'distance': 863,
            'cc': 'US',
            'city': 'New York',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['Bakers Field (W.218 St)',
             'New York, NY',
             'United States']},
           'categories': [{'id': '4eb1d4dd4b900d56c88a45fd',
             'name': 'River',
             'pluralName': 'Rivers',
             'shortName': 'River',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/parks_outdoors/river_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4e2ce957b61cd010838538ef-75'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4c83f3c0e602b1f7d78baa7a',
           'name': 'Waterfront DSNY',
           'location': {'lat': 40.86847530832377,
            'lng': -73.91168747355391,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.86847530832377,
              'lng': -73.91168747355391}],
            'distance': 903,
            'postalCode': '10034',
            'cc': 'US',
            'city': 'New York',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['New York, NY 10034', 'United States']},
           'categories': [{'id': '4bf58dd8d48988d165941735',
             'name': 'Scenic Lookout',
             'pluralName': 'Scenic Lookouts',
             'shortName': 'Scenic Lookout',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/parks_outdoors/sceniclookout_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4c83f3c0e602b1f7d78baa7a-76'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4c4b8403f7cc1b8d0676f83f',
           'name': 'Jerome Park Reservoir',
           'location': {'lat': 40.87258362206072,
            'lng': -73.90064260006244,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.87258362206072,
              'lng': -73.90064260006244}],
            'distance': 951,
            'postalCode': '10463',
            'cc': 'US',
            'city': 'Bronx',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['Bronx, NY 10463', 'United States']},
           'categories': [{'id': '4bf58dd8d48988d161941735',
             'name': 'Lake',
             'pluralName': 'Lakes',
             'shortName': 'Lake',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/parks_outdoors/lake_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4c4b8403f7cc1b8d0676f83f-77'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4dbf5056cda12687c8321adb',
           'name': "Washington's Walk",
           'location': {'crossStreet': '197th Street',
            'lat': 40.87255460684972,
            'lng': -73.90056259601329,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.87255460684972,
              'lng': -73.90056259601329}],
            'distance': 959,
            'postalCode': '10468',
            'cc': 'US',
            'city': 'Bronx',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['Reservoir Ave (197th Street)',
             'Bronx, NY 10468',
             'United States']},
           'categories': [{'id': '4bf58dd8d48988d163941735',
             'name': 'Park',
             'pluralName': 'Parks',
             'shortName': 'Park',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/parks_outdoors/park_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4dbf5056cda12687c8321adb-78'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '4e276fe8149554c7742ffa89',
           'name': 'Spuyten Duyvil Shorefront Park',
           'location': {'address': '2300 Johnson Ave',
            'lat': 40.87862004519057,
            'lng': -73.9217283337996,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.87862004519057,
              'lng': -73.9217283337996}],
            'distance': 959,
            'postalCode': '10463',
            'cc': 'US',
            'city': 'Bronx',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['2300 Johnson Ave',
             'Bronx, NY 10463',
             'United States']},
           'categories': [{'id': '4bf58dd8d48988d163941735',
             'name': 'Park',
             'pluralName': 'Parks',
             'shortName': 'Park',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/parks_outdoors/park_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-4e276fe8149554c7742ffa89-79'},
         {'reasons': {'count': 0,
           'items': [{'summary': 'This spot is popular',
             'type': 'general',
             'reasonName': 'globalInteractionReason'}]},
          'venue': {'id': '589f4a9901f0772d80390090',
           'name': 'One Yoga For All',
           'location': {'address': '3264 Johnson Ave',
            'crossStreet': 'West 235th',
            'lat': 40.885288,
            'lng': -73.909588,
            'labeledLatLngs': [{'label': 'display',
              'lat': 40.885288,
              'lng': -73.909588}],
            'distance': 976,
            'postalCode': '10463',
            'cc': 'US',
            'city': 'Bronx',
            'state': 'NY',
            'country': 'United States',
            'formattedAddress': ['3264 Johnson Ave (West 235th)',
             'Bronx, NY 10463',
             'United States']},
           'categories': [{'id': '4bf58dd8d48988d102941735',
             'name': 'Yoga Studio',
             'pluralName': 'Yoga Studios',
             'shortName': 'Yoga Studio',
             'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/shops/gym_yogastudio_',
              'suffix': '.png'},
             'primary': True}],
           'photos': {'count': 0, 'groups': []}},
          'referralId': 'e-0-589f4a9901f0772d80390090-80'}]}]}}




```python
def get_category_type(row):
    try:
        categories_list = row['categories']
    except:
        categories_list = row['venue.categories']
        
    if len(categories_list) == 0:
        return None
    else:
        return categories_list[0]['name']
```


```python
venues = results['response']['groups'][0]['items']
    
nearby_venues = json_normalize(venues) # flatten JSON

# filter columns
filtered_columns = ['venue.name', 'venue.categories', 'venue.location.lat', 'venue.location.lng']
nearby_venues = nearby_venues.loc[:, filtered_columns]

# filter the category for each row
nearby_venues['venue.categories'] = nearby_venues.apply(get_category_type, axis=1)

# clean columns
nearby_venues.columns = [col.split(".")[-1] for col in nearby_venues.columns]

nearby_venues.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>categories</th>
      <th>lat</th>
      <th>lng</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bikram Yoga</td>
      <td>Yoga Studio</td>
      <td>40.876844</td>
      <td>-73.906204</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Arturo's</td>
      <td>Pizza Place</td>
      <td>40.874412</td>
      <td>-73.910271</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Tibbett Diner</td>
      <td>Diner</td>
      <td>40.880404</td>
      <td>-73.908937</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Sam's Pizza</td>
      <td>Pizza Place</td>
      <td>40.879435</td>
      <td>-73.905859</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Starbucks</td>
      <td>Coffee Shop</td>
      <td>40.877531</td>
      <td>-73.905582</td>
    </tr>
  </tbody>
</table>
</div>



### Explore neighborhoods


```python
def getNearbyVenues(names, latitudes, longitudes, radius=500):
    
    venues_list=[]
    for name, lat, lng in zip(names, latitudes, longitudes):
        print(name)
            
        # create the API request URL
        url = 'https://api.foursquare.com/v2/venues/explore?&client_id={}&client_secret={}&v={}&ll={},{}&radius={}&limit={}'.format(
            CLIENT_ID, 
            CLIENT_SECRET, 
            VERSION, 
            lat, 
            lng, 
            radius, 
            LIMIT)
            
        # make the GET request
        results = requests.get(url).json()["response"]['groups'][0]['items']
        
        # return only relevant information for each nearby venue
        venues_list.append([(
            name, 
            lat, 
            lng, 
            v['venue']['name'], 
            v['venue']['location']['lat'], 
            v['venue']['location']['lng'],  
            v['venue']['categories'][0]['name']) for v in results])

    nearby_venues = pd.DataFrame([item for venue_list in venues_list for item in venue_list])
    nearby_venues.columns = ['Neighborhood', 
                  'Neighborhood Latitude', 
                  'Neighborhood Longitude', 
                  'Venue', 
                  'Venue Latitude', 
                  'Venue Longitude', 
                  'Venue Category']
    
    return(nearby_venues)
```


```python
manhattan_venues = getNearbyVenues(names=manhattan_data['Neighborhood'],
                                   latitudes=manhattan_data['Latitude'],
                                   longitudes=manhattan_data['Longitude']
                                  )
```

    Marble Hill
    Chinatown
    Washington Heights
    Inwood
    Hamilton Heights
    Manhattanville
    Central Harlem
    East Harlem
    Upper East Side
    Yorkville
    Lenox Hill
    Roosevelt Island
    Upper West Side
    Lincoln Square
    Clinton
    Midtown
    Murray Hill
    Chelsea
    Greenwich Village
    East Village
    Lower East Side
    Tribeca
    Little Italy
    Soho
    West Village
    Manhattan Valley
    Morningside Heights
    Gramercy
    Battery Park City
    Financial District
    Carnegie Hill
    Noho
    Civic Center
    Midtown South
    Sutton Place
    Turtle Bay
    Tudor City
    Stuyvesant Town
    Flatiron
    Hudson Yards
    


```python
# manhattan_venues[manhattan_venues["Venue Category"].str.contains("Hotel")]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Neighborhood Latitude</th>
      <th>Neighborhood Longitude</th>
      <th>Venue</th>
      <th>Venue Latitude</th>
      <th>Venue Longitude</th>
      <th>Venue Category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>28</th>
      <td>Chinatown</td>
      <td>40.715618</td>
      <td>-73.994279</td>
      <td>Hotel 50 Bowery NYC</td>
      <td>40.715936</td>
      <td>-73.996789</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>78</th>
      <td>Chinatown</td>
      <td>40.715618</td>
      <td>-73.994279</td>
      <td>The Leon Hotel</td>
      <td>40.715994</td>
      <td>-73.995171</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>466</th>
      <td>Upper East Side</td>
      <td>40.775639</td>
      <td>-73.960508</td>
      <td>The Carlyle</td>
      <td>40.774413</td>
      <td>-73.963301</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>467</th>
      <td>Upper East Side</td>
      <td>40.775639</td>
      <td>-73.960508</td>
      <td>Bemelmans Bar</td>
      <td>40.774607</td>
      <td>-73.963308</td>
      <td>Hotel Bar</td>
    </tr>
    <tr>
      <th>493</th>
      <td>Upper East Side</td>
      <td>40.775639</td>
      <td>-73.960508</td>
      <td>The Surrey</td>
      <td>40.774415</td>
      <td>-73.963889</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>3000</th>
      <td>Flatiron</td>
      <td>40.739673</td>
      <td>-73.990947</td>
      <td>The New York EDITION</td>
      <td>40.741286</td>
      <td>-73.987358</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>3058</th>
      <td>Hudson Yards</td>
      <td>40.756658</td>
      <td>-74.000111</td>
      <td>Equinox Hotel - Hudson Yards</td>
      <td>40.754768</td>
      <td>-74.001986</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>3064</th>
      <td>Hudson Yards</td>
      <td>40.756658</td>
      <td>-74.000111</td>
      <td>Four Points by Sheraton Manhattan Midtown West</td>
      <td>40.754998</td>
      <td>-73.998427</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>3086</th>
      <td>Hudson Yards</td>
      <td>40.756658</td>
      <td>-74.000111</td>
      <td>YOTEL New York</td>
      <td>40.759171</td>
      <td>-73.995268</td>
      <td>Hotel</td>
    </tr>
    <tr>
      <th>3089</th>
      <td>Hudson Yards</td>
      <td>40.756658</td>
      <td>-74.000111</td>
      <td>yotel galley</td>
      <td>40.759182</td>
      <td>-73.995513</td>
      <td>Hotel Bar</td>
    </tr>
  </tbody>
</table>
<p>68 rows × 7 columns</p>
</div>



#### Check out how many venue categories in the returned venues


```python
manhattan_venues_category = manhattan_venues[["Venue Category"]]
```


```python
manhattan_venues_category
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Venue Category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Pizza Place</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Yoga Studio</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Diner</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Coffee Shop</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Donut Shop</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>3099</th>
      <td>BBQ Joint</td>
    </tr>
    <tr>
      <th>3100</th>
      <td>Stables</td>
    </tr>
    <tr>
      <th>3101</th>
      <td>Café</td>
    </tr>
    <tr>
      <th>3102</th>
      <td>Boat or Ferry</td>
    </tr>
    <tr>
      <th>3103</th>
      <td>Bus Line</td>
    </tr>
  </tbody>
</table>
<p>3104 rows × 1 columns</p>
</div>




```python
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Restaurant") ] = "Restarant"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Diner") ] = "Restarant"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Pizza") ] = "Restarant"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Store") ] = "Store"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Shop") ] = "Shop"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Bar") ] = "Bar"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Theater") ] ="Theater"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Museum") ] ="Museum"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Studio") ] ="Studio"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("School") ] ="School"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Hostel") ] ="Hotel"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Park") ] = "Park"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Site") ] = "Site"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Station") ] = "Station"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Art") ] = "Art"
manhattan_venues_category[manhattan_venues_category["Venue Category"].str.contains("Stadium") ] = "Stadium"

# manhattan_venues_category.drop_duplicates(inplace=True)
manhattan_venues_category
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Venue Category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Restarant</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Studio</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Restarant</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Shop</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Shop</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>3099</th>
      <td>BBQ Joint</td>
    </tr>
    <tr>
      <th>3100</th>
      <td>Stables</td>
    </tr>
    <tr>
      <th>3101</th>
      <td>Café</td>
    </tr>
    <tr>
      <th>3102</th>
      <td>Boat or Ferry</td>
    </tr>
    <tr>
      <th>3103</th>
      <td>Bus Line</td>
    </tr>
  </tbody>
</table>
<p>3104 rows × 1 columns</p>
</div>




```python

manhattan_venues_category.drop_duplicates().tail(110)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Venue Category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>214</th>
      <td>Farmers Market</td>
    </tr>
    <tr>
      <th>220</th>
      <td>Bistro</td>
    </tr>
    <tr>
      <th>229</th>
      <td>Veterinarian</td>
    </tr>
    <tr>
      <th>247</th>
      <td>Dog Run</td>
    </tr>
    <tr>
      <th>249</th>
      <td>Playground</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>2907</th>
      <td>Heliport</td>
    </tr>
    <tr>
      <th>2935</th>
      <td>Baseball Field</td>
    </tr>
    <tr>
      <th>2941</th>
      <td>Pet Service</td>
    </tr>
    <tr>
      <th>3008</th>
      <td>Tech Startup</td>
    </tr>
    <tr>
      <th>3100</th>
      <td>Stables</td>
    </tr>
  </tbody>
</table>
<p>110 rows × 1 columns</p>
</div>



#### Merge similar categories into one category


```python
 manhattan_venues[["Venue Category"]] = manhattan_venues_category
```

### Analyze Each Neighborhood


```python
manhattan_venues.groupby('Neighborhood').count()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood Latitude</th>
      <th>Neighborhood Longitude</th>
      <th>Venue</th>
      <th>Venue Latitude</th>
      <th>Venue Longitude</th>
      <th>Venue Category</th>
    </tr>
    <tr>
      <th>Neighborhood</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Battery Park City</th>
      <td>66</td>
      <td>66</td>
      <td>66</td>
      <td>66</td>
      <td>66</td>
      <td>66</td>
    </tr>
    <tr>
      <th>Carnegie Hill</th>
      <td>83</td>
      <td>83</td>
      <td>83</td>
      <td>83</td>
      <td>83</td>
      <td>83</td>
    </tr>
    <tr>
      <th>Central Harlem</th>
      <td>44</td>
      <td>44</td>
      <td>44</td>
      <td>44</td>
      <td>44</td>
      <td>44</td>
    </tr>
    <tr>
      <th>Chelsea</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Chinatown</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Civic Center</th>
      <td>97</td>
      <td>97</td>
      <td>97</td>
      <td>97</td>
      <td>97</td>
      <td>97</td>
    </tr>
    <tr>
      <th>Clinton</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>East Harlem</th>
      <td>41</td>
      <td>41</td>
      <td>41</td>
      <td>41</td>
      <td>41</td>
      <td>41</td>
    </tr>
    <tr>
      <th>East Village</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Financial District</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Flatiron</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Gramercy</th>
      <td>86</td>
      <td>86</td>
      <td>86</td>
      <td>86</td>
      <td>86</td>
      <td>86</td>
    </tr>
    <tr>
      <th>Greenwich Village</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Hamilton Heights</th>
      <td>59</td>
      <td>59</td>
      <td>59</td>
      <td>59</td>
      <td>59</td>
      <td>59</td>
    </tr>
    <tr>
      <th>Hudson Yards</th>
      <td>56</td>
      <td>56</td>
      <td>56</td>
      <td>56</td>
      <td>56</td>
      <td>56</td>
    </tr>
    <tr>
      <th>Inwood</th>
      <td>57</td>
      <td>57</td>
      <td>57</td>
      <td>57</td>
      <td>57</td>
      <td>57</td>
    </tr>
    <tr>
      <th>Lenox Hill</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Lincoln Square</th>
      <td>95</td>
      <td>95</td>
      <td>95</td>
      <td>95</td>
      <td>95</td>
      <td>95</td>
    </tr>
    <tr>
      <th>Little Italy</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Lower East Side</th>
      <td>49</td>
      <td>49</td>
      <td>49</td>
      <td>49</td>
      <td>49</td>
      <td>49</td>
    </tr>
    <tr>
      <th>Manhattan Valley</th>
      <td>41</td>
      <td>41</td>
      <td>41</td>
      <td>41</td>
      <td>41</td>
      <td>41</td>
    </tr>
    <tr>
      <th>Manhattanville</th>
      <td>45</td>
      <td>45</td>
      <td>45</td>
      <td>45</td>
      <td>45</td>
      <td>45</td>
    </tr>
    <tr>
      <th>Marble Hill</th>
      <td>26</td>
      <td>26</td>
      <td>26</td>
      <td>26</td>
      <td>26</td>
      <td>26</td>
    </tr>
    <tr>
      <th>Midtown</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Midtown South</th>
      <td>98</td>
      <td>98</td>
      <td>98</td>
      <td>98</td>
      <td>98</td>
      <td>98</td>
    </tr>
    <tr>
      <th>Morningside Heights</th>
      <td>41</td>
      <td>41</td>
      <td>41</td>
      <td>41</td>
      <td>41</td>
      <td>41</td>
    </tr>
    <tr>
      <th>Murray Hill</th>
      <td>77</td>
      <td>77</td>
      <td>77</td>
      <td>77</td>
      <td>77</td>
      <td>77</td>
    </tr>
    <tr>
      <th>Noho</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Roosevelt Island</th>
      <td>29</td>
      <td>29</td>
      <td>29</td>
      <td>29</td>
      <td>29</td>
      <td>29</td>
    </tr>
    <tr>
      <th>Soho</th>
      <td>88</td>
      <td>88</td>
      <td>88</td>
      <td>88</td>
      <td>88</td>
      <td>88</td>
    </tr>
    <tr>
      <th>Stuyvesant Town</th>
      <td>14</td>
      <td>14</td>
      <td>14</td>
      <td>14</td>
      <td>14</td>
      <td>14</td>
    </tr>
    <tr>
      <th>Sutton Place</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Tribeca</th>
      <td>77</td>
      <td>77</td>
      <td>77</td>
      <td>77</td>
      <td>77</td>
      <td>77</td>
    </tr>
    <tr>
      <th>Tudor City</th>
      <td>74</td>
      <td>74</td>
      <td>74</td>
      <td>74</td>
      <td>74</td>
      <td>74</td>
    </tr>
    <tr>
      <th>Turtle Bay</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Upper East Side</th>
      <td>90</td>
      <td>90</td>
      <td>90</td>
      <td>90</td>
      <td>90</td>
      <td>90</td>
    </tr>
    <tr>
      <th>Upper West Side</th>
      <td>84</td>
      <td>84</td>
      <td>84</td>
      <td>84</td>
      <td>84</td>
      <td>84</td>
    </tr>
    <tr>
      <th>Washington Heights</th>
      <td>87</td>
      <td>87</td>
      <td>87</td>
      <td>87</td>
      <td>87</td>
      <td>87</td>
    </tr>
    <tr>
      <th>West Village</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
    <tr>
      <th>Yorkville</th>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
      <td>100</td>
    </tr>
  </tbody>
</table>
</div>




```python
# one hot encoding
manhattan_onehot = pd.get_dummies(manhattan_venues[['Venue Category']], prefix="", prefix_sep="")

# add neighborhood column back to dataframe
manhattan_onehot['Neighborhood'] = manhattan_venues['Neighborhood'] 

# move neighborhood column to the first column
fixed_columns = [manhattan_onehot.columns[-1]] + list(manhattan_onehot.columns[:-1])
manhattan_onehot = manhattan_onehot[fixed_columns]

manhattan_onehot.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Adult Boutique</th>
      <th>Arcade</th>
      <th>Art</th>
      <th>Athletics &amp; Sports</th>
      <th>Auditorium</th>
      <th>BBQ Joint</th>
      <th>Bakery</th>
      <th>Bank</th>
      <th>Bar</th>
      <th>...</th>
      <th>Tennis Court</th>
      <th>Theater</th>
      <th>Tourist Information Center</th>
      <th>Track</th>
      <th>Trail</th>
      <th>Used Bookstore</th>
      <th>Veterinarian</th>
      <th>Volleyball Court</th>
      <th>Waterfront</th>
      <th>Wings Joint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Marble Hill</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Marble Hill</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Marble Hill</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Marble Hill</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Marble Hill</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 154 columns</p>
</div>




```python
manhattan_grouped = manhattan_onehot.groupby('Neighborhood').mean().reset_index()
manhattan_grouped
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Adult Boutique</th>
      <th>Arcade</th>
      <th>Art</th>
      <th>Athletics &amp; Sports</th>
      <th>Auditorium</th>
      <th>BBQ Joint</th>
      <th>Bakery</th>
      <th>Bank</th>
      <th>Bar</th>
      <th>...</th>
      <th>Tennis Court</th>
      <th>Theater</th>
      <th>Tourist Information Center</th>
      <th>Track</th>
      <th>Trail</th>
      <th>Used Bookstore</th>
      <th>Veterinarian</th>
      <th>Volleyball Court</th>
      <th>Waterfront</th>
      <th>Wings Joint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Battery Park City</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.015152</td>
      <td>0.015152</td>
      <td>0.015152</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.015152</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.015152</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Carnegie Hill</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.012048</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.024096</td>
      <td>0.000000</td>
      <td>0.072289</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Central Harlem</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.045455</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.022727</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.113636</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Chelsea</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.090000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.030000</td>
      <td>0.000000</td>
      <td>0.050000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.040000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Chinatown</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.050000</td>
      <td>0.000000</td>
      <td>0.100000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Civic Center</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.010309</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.020619</td>
      <td>0.000000</td>
      <td>0.092784</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.010309</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Clinton</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.030000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.000000</td>
      <td>0.080000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.100000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>East Harlem</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.024390</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.097561</td>
      <td>0.000000</td>
      <td>0.048780</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>8</th>
      <td>East Village</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.000000</td>
      <td>0.200000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Financial District</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.090000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Flatiron</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.000000</td>
      <td>0.040000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Gramercy</td>
      <td>0.00</td>
      <td>0.011628</td>
      <td>0.011628</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.011628</td>
      <td>0.000000</td>
      <td>0.116279</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Greenwich Village</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.000000</td>
      <td>0.060000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.030000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Hamilton Heights</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.033898</td>
      <td>0.016949</td>
      <td>0.101695</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Hudson Yards</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.035714</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.017857</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.071429</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.017857</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Inwood</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.035088</td>
      <td>0.000000</td>
      <td>0.070175</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.017544</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Lenox Hill</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.020000</td>
      <td>0.010000</td>
      <td>0.070000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Lincoln Square</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.052632</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.021053</td>
      <td>0.010526</td>
      <td>0.031579</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.084211</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Little Italy</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.040000</td>
      <td>0.000000</td>
      <td>0.060000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Lower East Side</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.081633</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.040816</td>
      <td>0.000000</td>
      <td>0.061224</td>
      <td>...</td>
      <td>0.020408</td>
      <td>0.020408</td>
      <td>0.00</td>
      <td>0.020408</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Manhattan Valley</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.024390</td>
      <td>0.000000</td>
      <td>0.048780</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.024390</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Manhattanville</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.022222</td>
      <td>0.000000</td>
      <td>0.022222</td>
      <td>0.044444</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Marble Hill</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.038462</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Midtown</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.040000</td>
      <td>0.000000</td>
      <td>0.030000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.040000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Midtown South</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.010204</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.081633</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.020408</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Morningside Heights</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.024390</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Murray Hill</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.012987</td>
      <td>0.000000</td>
      <td>0.064935</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Noho</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.020000</td>
      <td>0.000000</td>
      <td>0.050000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Roosevelt Island</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.034483</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Soho</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.022727</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.034091</td>
      <td>0.000000</td>
      <td>0.056818</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.011364</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Stuyvesant Town</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.142857</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Sutton Place</td>
      <td>0.01</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.010000</td>
      <td>0.050000</td>
      <td>...</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Tribeca</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.025974</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.038961</td>
      <td>0.000000</td>
      <td>0.077922</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.012987</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.012987</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Tudor City</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.013514</td>
      <td>0.040541</td>
      <td>...</td>
      <td>0.013514</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.013514</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Turtle Bay</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.100000</td>
      <td>...</td>
      <td>0.010000</td>
      <td>0.000000</td>
      <td>0.01</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Upper East Side</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.022222</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.055556</td>
      <td>0.000000</td>
      <td>0.055556</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Upper West Side</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.011905</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.023810</td>
      <td>0.000000</td>
      <td>0.130952</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.011905</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.011905</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Washington Heights</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.045977</td>
      <td>0.022989</td>
      <td>0.034483</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>38</th>
      <td>West Village</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.040000</td>
      <td>0.000000</td>
      <td>0.120000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>39</th>
      <td>Yorkville</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.020000</td>
      <td>0.010000</td>
      <td>0.070000</td>
      <td>...</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
<p>40 rows × 154 columns</p>
</div>



#### Let's add up the number of places that tourists might go


```python
play = manhattan_grouped[["Art","Theater","Museum","Park","Site","Bar","Stadium"]].sum(axis=1)
```


```python
play
```




    0     0.212121
    1     0.108434
    2     0.181818
    3     0.200000
    4     0.130000
    5     0.144330
    6     0.220000
    7     0.121951
    8     0.220000
    9     0.140000
    10    0.090000
    11    0.151163
    12    0.120000
    13    0.152542
    14    0.160714
    15    0.122807
    16    0.080000
    17    0.168421
    18    0.060000
    19    0.183673
    20    0.073171
    21    0.088889
    22    0.038462
    23    0.110000
    24    0.112245
    25    0.097561
    26    0.077922
    27    0.090000
    28    0.068966
    29    0.102273
    30    0.285714
    31    0.100000
    32    0.207792
    33    0.108108
    34    0.150000
    35    0.100000
    36    0.166667
    37    0.057471
    38    0.200000
    39    0.090000
    dtype: float64




```python
manhattan_grouped = manhattan_grouped[["Neighborhood","Restarant", "Hotel"]]
manhattan_grouped["Sites"] = play
```


```python
manhattan_grouped
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Restarant</th>
      <th>Hotel</th>
      <th>Sites</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Battery Park City</td>
      <td>0.075758</td>
      <td>0.060606</td>
      <td>0.212121</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Carnegie Hill</td>
      <td>0.277108</td>
      <td>0.012048</td>
      <td>0.108434</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Central Harlem</td>
      <td>0.363636</td>
      <td>0.000000</td>
      <td>0.181818</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Chelsea</td>
      <td>0.190000</td>
      <td>0.010000</td>
      <td>0.200000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Chinatown</td>
      <td>0.380000</td>
      <td>0.020000</td>
      <td>0.130000</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Civic Center</td>
      <td>0.237113</td>
      <td>0.051546</td>
      <td>0.144330</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Clinton</td>
      <td>0.220000</td>
      <td>0.030000</td>
      <td>0.220000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>East Harlem</td>
      <td>0.365854</td>
      <td>0.000000</td>
      <td>0.121951</td>
    </tr>
    <tr>
      <th>8</th>
      <td>East Village</td>
      <td>0.410000</td>
      <td>0.000000</td>
      <td>0.220000</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Financial District</td>
      <td>0.280000</td>
      <td>0.040000</td>
      <td>0.140000</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Flatiron</td>
      <td>0.240000</td>
      <td>0.010000</td>
      <td>0.090000</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Gramercy</td>
      <td>0.267442</td>
      <td>0.023256</td>
      <td>0.151163</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Greenwich Village</td>
      <td>0.400000</td>
      <td>0.000000</td>
      <td>0.120000</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Hamilton Heights</td>
      <td>0.372881</td>
      <td>0.000000</td>
      <td>0.152542</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Hudson Yards</td>
      <td>0.214286</td>
      <td>0.053571</td>
      <td>0.160714</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Inwood</td>
      <td>0.385965</td>
      <td>0.000000</td>
      <td>0.122807</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Lenox Hill</td>
      <td>0.320000</td>
      <td>0.000000</td>
      <td>0.080000</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Lincoln Square</td>
      <td>0.189474</td>
      <td>0.010526</td>
      <td>0.168421</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Little Italy</td>
      <td>0.330000</td>
      <td>0.020000</td>
      <td>0.060000</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Lower East Side</td>
      <td>0.326531</td>
      <td>0.000000</td>
      <td>0.183673</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Manhattan Valley</td>
      <td>0.439024</td>
      <td>0.024390</td>
      <td>0.073171</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Manhattanville</td>
      <td>0.466667</td>
      <td>0.000000</td>
      <td>0.088889</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Marble Hill</td>
      <td>0.153846</td>
      <td>0.000000</td>
      <td>0.038462</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Midtown</td>
      <td>0.240000</td>
      <td>0.050000</td>
      <td>0.110000</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Midtown South</td>
      <td>0.306122</td>
      <td>0.051020</td>
      <td>0.112245</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Morningside Heights</td>
      <td>0.268293</td>
      <td>0.000000</td>
      <td>0.097561</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Murray Hill</td>
      <td>0.337662</td>
      <td>0.051948</td>
      <td>0.077922</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Noho</td>
      <td>0.390000</td>
      <td>0.020000</td>
      <td>0.090000</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Roosevelt Island</td>
      <td>0.103448</td>
      <td>0.034483</td>
      <td>0.068966</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Soho</td>
      <td>0.306818</td>
      <td>0.022727</td>
      <td>0.102273</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Stuyvesant Town</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.285714</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Sutton Place</td>
      <td>0.270000</td>
      <td>0.030000</td>
      <td>0.100000</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Tribeca</td>
      <td>0.259740</td>
      <td>0.025974</td>
      <td>0.207792</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Tudor City</td>
      <td>0.378378</td>
      <td>0.013514</td>
      <td>0.108108</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Turtle Bay</td>
      <td>0.330000</td>
      <td>0.020000</td>
      <td>0.150000</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Upper East Side</td>
      <td>0.288889</td>
      <td>0.022222</td>
      <td>0.100000</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Upper West Side</td>
      <td>0.404762</td>
      <td>0.011905</td>
      <td>0.166667</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Washington Heights</td>
      <td>0.298851</td>
      <td>0.000000</td>
      <td>0.057471</td>
    </tr>
    <tr>
      <th>38</th>
      <td>West Village</td>
      <td>0.330000</td>
      <td>0.000000</td>
      <td>0.200000</td>
    </tr>
    <tr>
      <th>39</th>
      <td>Yorkville</td>
      <td>0.350000</td>
      <td>0.000000</td>
      <td>0.090000</td>
    </tr>
  </tbody>
</table>
</div>




```python
num_top_venues = 5

for hood in manhattan_grouped['Neighborhood']:
    print("----"+hood+"----")
    temp = manhattan_grouped[manhattan_grouped['Neighborhood'] == hood].T.reset_index()
    temp.columns = ['venue','freq']
    temp = temp.iloc[1:]
    temp['freq'] = temp['freq'].astype(float)
    temp = temp.round({'freq': 2})
    print(temp.sort_values('freq', ascending=False).reset_index(drop=True).head(num_top_venues))
    print('\n')
```

    ----Battery Park City----
           venue  freq
    0      Sites  0.21
    1  Restarant  0.08
    2      Hotel  0.06
    
    
    ----Carnegie Hill----
           venue  freq
    0  Restarant  0.28
    1      Sites  0.11
    2      Hotel  0.01
    
    
    ----Central Harlem----
           venue  freq
    0  Restarant  0.36
    1      Sites  0.18
    2      Hotel  0.00
    
    
    ----Chelsea----
           venue  freq
    0      Sites  0.20
    1  Restarant  0.19
    2      Hotel  0.01
    
    
    ----Chinatown----
           venue  freq
    0  Restarant  0.38
    1      Sites  0.13
    2      Hotel  0.02
    
    
    ----Civic Center----
           venue  freq
    0  Restarant  0.24
    1      Sites  0.14
    2      Hotel  0.05
    
    
    ----Clinton----
           venue  freq
    0  Restarant  0.22
    1      Sites  0.22
    2      Hotel  0.03
    
    
    ----East Harlem----
           venue  freq
    0  Restarant  0.37
    1      Sites  0.12
    2      Hotel  0.00
    
    
    ----East Village----
           venue  freq
    0  Restarant  0.41
    1      Sites  0.22
    2      Hotel  0.00
    
    
    ----Financial District----
           venue  freq
    0  Restarant  0.28
    1      Sites  0.14
    2      Hotel  0.04
    
    
    ----Flatiron----
           venue  freq
    0  Restarant  0.24
    1      Sites  0.09
    2      Hotel  0.01
    
    
    ----Gramercy----
           venue  freq
    0  Restarant  0.27
    1      Sites  0.15
    2      Hotel  0.02
    
    
    ----Greenwich Village----
           venue  freq
    0  Restarant  0.40
    1      Sites  0.12
    2      Hotel  0.00
    
    
    ----Hamilton Heights----
           venue  freq
    0  Restarant  0.37
    1      Sites  0.15
    2      Hotel  0.00
    
    
    ----Hudson Yards----
           venue  freq
    0  Restarant  0.21
    1      Sites  0.16
    2      Hotel  0.05
    
    
    ----Inwood----
           venue  freq
    0  Restarant  0.39
    1      Sites  0.12
    2      Hotel  0.00
    
    
    ----Lenox Hill----
           venue  freq
    0  Restarant  0.32
    1      Sites  0.08
    2      Hotel  0.00
    
    
    ----Lincoln Square----
           venue  freq
    0  Restarant  0.19
    1      Sites  0.17
    2      Hotel  0.01
    
    
    ----Little Italy----
           venue  freq
    0  Restarant  0.33
    1      Sites  0.06
    2      Hotel  0.02
    
    
    ----Lower East Side----
           venue  freq
    0  Restarant  0.33
    1      Sites  0.18
    2      Hotel  0.00
    
    
    ----Manhattan Valley----
           venue  freq
    0  Restarant  0.44
    1      Sites  0.07
    2      Hotel  0.02
    
    
    ----Manhattanville----
           venue  freq
    0  Restarant  0.47
    1      Sites  0.09
    2      Hotel  0.00
    
    
    ----Marble Hill----
           venue  freq
    0  Restarant  0.15
    1      Sites  0.04
    2      Hotel  0.00
    
    
    ----Midtown----
           venue  freq
    0  Restarant  0.24
    1      Sites  0.11
    2      Hotel  0.05
    
    
    ----Midtown South----
           venue  freq
    0  Restarant  0.31
    1      Sites  0.11
    2      Hotel  0.05
    
    
    ----Morningside Heights----
           venue  freq
    0  Restarant  0.27
    1      Sites  0.10
    2      Hotel  0.00
    
    
    ----Murray Hill----
           venue  freq
    0  Restarant  0.34
    1      Sites  0.08
    2      Hotel  0.05
    
    
    ----Noho----
           venue  freq
    0  Restarant  0.39
    1      Sites  0.09
    2      Hotel  0.02
    
    
    ----Roosevelt Island----
           venue  freq
    0  Restarant  0.10
    1      Sites  0.07
    2      Hotel  0.03
    
    
    ----Soho----
           venue  freq
    0  Restarant  0.31
    1      Sites  0.10
    2      Hotel  0.02
    
    
    ----Stuyvesant Town----
           venue  freq
    0      Sites  0.29
    1  Restarant  0.00
    2      Hotel  0.00
    
    
    ----Sutton Place----
           venue  freq
    0  Restarant  0.27
    1      Sites  0.10
    2      Hotel  0.03
    
    
    ----Tribeca----
           venue  freq
    0  Restarant  0.26
    1      Sites  0.21
    2      Hotel  0.03
    
    
    ----Tudor City----
           venue  freq
    0  Restarant  0.38
    1      Sites  0.11
    2      Hotel  0.01
    
    
    ----Turtle Bay----
           venue  freq
    0  Restarant  0.33
    1      Sites  0.15
    2      Hotel  0.02
    
    
    ----Upper East Side----
           venue  freq
    0  Restarant  0.29
    1      Sites  0.10
    2      Hotel  0.02
    
    
    ----Upper West Side----
           venue  freq
    0  Restarant  0.40
    1      Sites  0.17
    2      Hotel  0.01
    
    
    ----Washington Heights----
           venue  freq
    0  Restarant  0.30
    1      Sites  0.06
    2      Hotel  0.00
    
    
    ----West Village----
           venue  freq
    0  Restarant  0.33
    1      Sites  0.20
    2      Hotel  0.00
    
    
    ----Yorkville----
           venue  freq
    0  Restarant  0.35
    1      Sites  0.09
    2      Hotel  0.00
    
    
    


```python
manhattan_grouped_clustering = manhattan_grouped.drop('Neighborhood', 1)
```

#### Select the number of cluster centers based on the elbow point


```python
SSE = {}
for i in range(1, 10):
    kmeans = KMeans(n_clusters=i, random_state=0).fit(manhattan_grouped_clustering)
    SSE[i] = kmeans.inertia_

fig = plt.figure()
ax = fig.add_subplot(111)
plt.plot(list(SSE.keys()), list(SSE.values()))
ax.annotate("elbow", xy=(3,0.21), xytext=(4,0.2), arrowprops=dict(facecolor="black",shrink=0.05))
plt.xlabel("Number of cluster")
plt.ylabel("SSE")
plt.show()

```


![svg](output_53_0.svg)



```python
# set number of clusters
kclusters = 3

# run k-means clustering
kmeans = KMeans(n_clusters=kclusters, random_state=0).fit(manhattan_grouped_clustering)

# check cluster labels generated for each row in the dataframe
kmeans.labels_[0:10] 
```




    array([2, 0, 1, 0, 1, 0, 0, 1, 1, 0])




```python

manhattan_merged = manhattan_grouped

# merge toronto_grouped with toronto_data to add latitude/longitude for each neighborhood
manhattan_merged["Cluster Labels"] = kmeans.labels_
manhattan_merged = manhattan_merged.join(manhattan_data.set_index('Neighborhood'), on='Neighborhood')
manhattan_merged.head() 
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Restarant</th>
      <th>Hotel</th>
      <th>Sites</th>
      <th>Cluster Labels</th>
      <th>Borough</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Battery Park City</td>
      <td>0.075758</td>
      <td>0.060606</td>
      <td>0.212121</td>
      <td>2</td>
      <td>Manhattan</td>
      <td>40.711932</td>
      <td>-74.016869</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Carnegie Hill</td>
      <td>0.277108</td>
      <td>0.012048</td>
      <td>0.108434</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.782683</td>
      <td>-73.953256</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Central Harlem</td>
      <td>0.363636</td>
      <td>0.000000</td>
      <td>0.181818</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.815976</td>
      <td>-73.943211</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Chelsea</td>
      <td>0.190000</td>
      <td>0.010000</td>
      <td>0.200000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.744035</td>
      <td>-74.003116</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Chinatown</td>
      <td>0.380000</td>
      <td>0.020000</td>
      <td>0.130000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.715618</td>
      <td>-73.994279</td>
    </tr>
  </tbody>
</table>
</div>




```python
# create map
map_clusters = folium.Map(location=[latitude, longitude], zoom_start=11)

# set color scheme for the clusters
x = np.arange(kclusters)
ys = [i + x + (i*x)**2 for i in range(kclusters)]
colors_array = cm.rainbow(np.linspace(0, 1, len(ys)))
rainbow = [colors.rgb2hex(i) for i in colors_array]

# add markers to the map
markers_colors = []
for lat, lon, poi, cluster in zip(manhattan_merged['Latitude'], manhattan_merged['Longitude'], manhattan_merged['Neighborhood'], manhattan_merged['Cluster Labels']):
    label = folium.Popup(str(poi) + ' Cluster ' + str(cluster), parse_html=True)
    folium.CircleMarker(
        [lat, lon],
        radius=5,
        popup=label,
        color=rainbow[cluster-1],
        fill=True,
        fill_color=rainbow[cluster-1],
        fill_opacity=0.7).add_to(map_clusters)
       

map_clusters
```




<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe src="about:blank" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" data-html=PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMgewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb2xpdW0tbWFwIiBpZD0ibWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzIiA+PC9kaXY+CiAgICAgICAgCjwvYm9keT4KPHNjcmlwdD4gICAgCiAgICAKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG51bGw7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcF8wMmRkNTNhMjUxMmE0NzZiYjZlY2JkZTBiNDY0ODdlMyA9IEwubWFwKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcF8wMmRkNTNhMjUxMmE0NzZiYjZlY2JkZTBiNDY0ODdlMycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyOiBbNDAuNzg5NjIzOSwtNzMuOTU5ODkzOV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEJvdW5kczogYm91bmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmxkQ29weUp1bXA6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHRpbGVfbGF5ZXJfYWM0NGExZWQyODAzNGI1ZmFiNTY3OWFjNjY1YzBmMzIgPSBMLnRpbGVMYXllcigKICAgICAgICAgICAgICAgICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsCiAgICAgICAgICAgICAgICB7CiAgImF0dHJpYnV0aW9uIjogbnVsbCwKICAiZGV0ZWN0UmV0aW5hIjogZmFsc2UsCiAgIm1heFpvb20iOiAxOCwKICAibWluWm9vbSI6IDEsCiAgIm5vV3JhcCI6IGZhbHNlLAogICJzdWJkb21haW5zIjogImFiYyIKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2QxYzRjNWMwNDM0ODQ5ODE4MGY3ZThkN2IxZTg2NWU0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzExOTMxOTgzOTQ1NjUsLTc0LjAxNjg2OTMwNTA4NjE3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MGZmYjQiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODBmZmI0IiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I0MDJmNTliZGViNjQ1Y2Y5YzBhNWE0ZGE3NGE4ZjNiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzhkZWEyYTJmODIwODQ1OTdiZjEyZmVmZDM4NzY3NzA1ID0gJCgnPGRpdiBpZD0iaHRtbF84ZGVhMmEyZjgyMDg0NTk3YmYxMmZlZmQzODc2NzcwNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmF0dGVyeSBQYXJrIENpdHkgQ2x1c3RlciAyPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iNDAyZjU5YmRlYjY0NWNmOWMwYTVhNGRhNzRhOGYzYi5zZXRDb250ZW50KGh0bWxfOGRlYTJhMmY4MjA4NDU5N2JmMTJmZWZkMzg3Njc3MDUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDFjNGM1YzA0MzQ4NDk4MTgwZjdlOGQ3YjFlODY1ZTQuYmluZFBvcHVwKHBvcHVwX2I0MDJmNTliZGViNjQ1Y2Y5YzBhNWE0ZGE3NGE4ZjNiKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzMxNmQ1MTc3NWNiMDQ4MGNiMmEwZjk4NjUyYWI0M2I1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzgyNjgyNTY3MTI1NywtNzMuOTUzMjU2NDY4MzcxMTJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMTFiNTZmNzY5YThiNGVhY2E0Y2U5Nzk1NzgyNTg3YzMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjM5MjM2MTVhYjljNDczNThiYjE0ZDUzZmQ1M2VjNzEgPSAkKCc8ZGl2IGlkPSJodG1sXzIzOTIzNjE1YWI5YzQ3MzU4YmIxNGQ1M2ZkNTNlYzcxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DYXJuZWdpZSBIaWxsIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTFiNTZmNzY5YThiNGVhY2E0Y2U5Nzk1NzgyNTg3YzMuc2V0Q29udGVudChodG1sXzIzOTIzNjE1YWI5YzQ3MzU4YmIxNGQ1M2ZkNTNlYzcxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzMxNmQ1MTc3NWNiMDQ4MGNiMmEwZjk4NjUyYWI0M2I1LmJpbmRQb3B1cChwb3B1cF8xMWI1NmY3NjlhOGI0ZWFjYTRjZTk3OTU3ODI1ODdjMyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yZGMwNmRiMDc0YzE0ZjM0OWY3NjY3NTBhOTMxNDBmOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjgxNTk3NjA2NzQyNDE0LC03My45NDMyMTExMjYwMzkwNV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjODAwMGZmIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF8wMmRkNTNhMjUxMmE0NzZiYjZlY2JkZTBiNDY0ODdlMyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jYzc5YTNiNDUxMGU0MmRjOGQxMGM4ZjJmYWJiMGE2YyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8wMzAxOWMxMDk0ZDk0MTE5OGNkMTk0MTA5ODBhMWJmOSA9ICQoJzxkaXYgaWQ9Imh0bWxfMDMwMTljMTA5NGQ5NDExOThjZDE5NDEwOTgwYTFiZjkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNlbnRyYWwgSGFybGVtIENsdXN0ZXIgMTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfY2M3OWEzYjQ1MTBlNDJkYzhkMTBjOGYyZmFiYjBhNmMuc2V0Q29udGVudChodG1sXzAzMDE5YzEwOTRkOTQxMTk4Y2QxOTQxMDk4MGExYmY5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzJkYzA2ZGIwNzRjMTRmMzQ5Zjc2Njc1MGE5MzE0MGY4LmJpbmRQb3B1cChwb3B1cF9jYzc5YTNiNDUxMGU0MmRjOGQxMGM4ZjJmYWJiMGE2Yyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wNjM2ZmEwODNmMDg0YjcwOGE3ZDBhYTkzMDkyMDcxYyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc0NDAzNDcwNjc0Nzk3NSwtNzQuMDAzMTE2MzM0NzI4MTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMTZkMTdiYmU5ODI4NGVjZTkwYzFlYTM3NWEwY2M0ZDggPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjVlODhiZDRjNjllNDNiZTk4YWNjOWVmNGI4ZDg0M2IgPSAkKCc8ZGl2IGlkPSJodG1sXzI1ZTg4YmQ0YzY5ZTQzYmU5OGFjYzllZjRiOGQ4NDNiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaGVsc2VhIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTZkMTdiYmU5ODI4NGVjZTkwYzFlYTM3NWEwY2M0ZDguc2V0Q29udGVudChodG1sXzI1ZTg4YmQ0YzY5ZTQzYmU5OGFjYzllZjRiOGQ4NDNiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzA2MzZmYTA4M2YwODRiNzA4YTdkMGFhOTMwOTIwNzFjLmJpbmRQb3B1cChwb3B1cF8xNmQxN2JiZTk4Mjg0ZWNlOTBjMWVhMzc1YTBjYzRkOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81MDQ2NWM4MTU4ODI0ZDViYTJlYjExOGQyNjM5MTc1ZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjcxNTYxODQyMjMxNDMyLC03My45OTQyNzkzNjI1NTk3OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjODAwMGZmIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF8wMmRkNTNhMjUxMmE0NzZiYjZlY2JkZTBiNDY0ODdlMyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mNzExZjRjYWZjYTU0Y2I3YmEwY2Q3NGJkNzlmOWIzZiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9lN2MxOGE5YjNlOGU0NzIzYTMxMzIwN2Q4OGQ1ZGU0NSA9ICQoJzxkaXYgaWQ9Imh0bWxfZTdjMThhOWIzZThlNDcyM2EzMTMyMDdkODhkNWRlNDUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNoaW5hdG93biBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Y3MTFmNGNhZmNhNTRjYjdiYTBjZDc0YmQ3OWY5YjNmLnNldENvbnRlbnQoaHRtbF9lN2MxOGE5YjNlOGU0NzIzYTMxMzIwN2Q4OGQ1ZGU0NSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81MDQ2NWM4MTU4ODI0ZDViYTJlYjExOGQyNjM5MTc1ZS5iaW5kUG9wdXAocG9wdXBfZjcxMWY0Y2FmY2E1NGNiN2JhMGNkNzRiZDc5ZjliM2YpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNGNjZTcwMjJmM2FmNDM0YTk2M2RhNTQ3M2I3NWQ2Y2MgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43MTUyMjg5MjA0NjI4MiwtNzQuMDA1NDE1Mjk4NzMzNTVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDI0ZDgyZjY3ZTkxNDlmYjk5NjU1ZmFjMzk5OWQ2MTggPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2E2YzhlYmE0ZGYyNGE5OWIxNzY2ZTI4YzNlZWY1YzQgPSAkKCc8ZGl2IGlkPSJodG1sX2NhNmM4ZWJhNGRmMjRhOTliMTc2NmUyOGMzZWVmNWM0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaXZpYyBDZW50ZXIgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kMjRkODJmNjdlOTE0OWZiOTk2NTVmYWMzOTk5ZDYxOC5zZXRDb250ZW50KGh0bWxfY2E2YzhlYmE0ZGYyNGE5OWIxNzY2ZTI4YzNlZWY1YzQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNGNjZTcwMjJmM2FmNDM0YTk2M2RhNTQ3M2I3NWQ2Y2MuYmluZFBvcHVwKHBvcHVwX2QyNGQ4MmY2N2U5MTQ5ZmI5OTY1NWZhYzM5OTlkNjE4KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzI0ODFlOWNmNjkwYzQ0OThiMzQyMjI5ODJlOGNlOTYxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzU5MTAwODkxNDYyMTIsLTczLjk5NjExOTM2MzA5NDc5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2ZmMmE1YzIzMGYwYzRiZTI5YzcxOWUxYmI1NzQyOGRiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc5MjY0MTZmZDllMTRmZjY5OTcwN2NjYzZlMWQ5OWU0ID0gJCgnPGRpdiBpZD0iaHRtbF83OTI2NDE2ZmQ5ZTE0ZmY2OTk3MDdjY2M2ZTFkOTllNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2xpbnRvbiBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2ZmMmE1YzIzMGYwYzRiZTI5YzcxOWUxYmI1NzQyOGRiLnNldENvbnRlbnQoaHRtbF83OTI2NDE2ZmQ5ZTE0ZmY2OTk3MDdjY2M2ZTFkOTllNCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yNDgxZTljZjY5MGM0NDk4YjM0MjIyOTgyZThjZTk2MS5iaW5kUG9wdXAocG9wdXBfZmYyYTVjMjMwZjBjNGJlMjljNzE5ZTFiYjU3NDI4ZGIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTRmNWQxM2NlNzUxNDJhMGI2NTdlY2QwYzY0MzMxMTggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43OTIyNDk0NjY2MzAzMywtNzMuOTQ0MTgyMjMxNDg1MjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZmM4YTZiNmViZmJhNDQyYWE3ZjFkZTQzMDY3OTg3MWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOTNlOGUwYmVkNzU1NDllNjkwYWVkZDExMjI4N2NlYTYgPSAkKCc8ZGl2IGlkPSJodG1sXzkzZThlMGJlZDc1NTQ5ZTY5MGFlZGQxMTIyODdjZWE2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5FYXN0IEhhcmxlbSBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2ZjOGE2YjZlYmZiYTQ0MmFhN2YxZGU0MzA2Nzk4NzFlLnNldENvbnRlbnQoaHRtbF85M2U4ZTBiZWQ3NTU0OWU2OTBhZWRkMTEyMjg3Y2VhNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lNGY1ZDEzY2U3NTE0MmEwYjY1N2VjZDBjNjQzMzExOC5iaW5kUG9wdXAocG9wdXBfZmM4YTZiNmViZmJhNDQyYWE3ZjFkZTQzMDY3OTg3MWUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzZjY2QwNmQ1ZDAyNDRmOWE0OWNmNmFjODAxM2U3MjggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43Mjc4NDY3NzcyNzAyNDQsLTczLjk4MjIyNjE2NTA2NDE2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M4OTAxYTNhYTZiNzRkMjVhYWU1MzE1MzBhZGU0Y2FjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JjNDc3ODI1ZjRjYjQ0NDg4NDc3NDRjMzk2OWI4ODM1ID0gJCgnPGRpdiBpZD0iaHRtbF9iYzQ3NzgyNWY0Y2I0NDQ4ODQ3NzQ0YzM5NjliODgzNSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RWFzdCBWaWxsYWdlIENsdXN0ZXIgMTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYzg5MDFhM2FhNmI3NGQyNWFhZTUzMTUzMGFkZTRjYWMuc2V0Q29udGVudChodG1sX2JjNDc3ODI1ZjRjYjQ0NDg4NDc3NDRjMzk2OWI4ODM1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzM2Y2NkMDZkNWQwMjQ0ZjlhNDljZjZhYzgwMTNlNzI4LmJpbmRQb3B1cChwb3B1cF9jODkwMWEzYWE2Yjc0ZDI1YWFlNTMxNTMwYWRlNGNhYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85YzUxMDFmMjIxNzg0MTM2YTNlYzI4NjAyZDkwYjIzOSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjcwNzEwNzEwNzI3MDQ4LC03NC4wMTA2NjU0NDUyMTI3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2ExNzMyODVjMDJhYjRlNzg5NzgyYjZkNzgxYzA1OWE4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzM2ZWUwYzIyZmY1YzQ2YjdiZmNmMzY1MTk5ODBjNDQwID0gJCgnPGRpdiBpZD0iaHRtbF8zNmVlMGMyMmZmNWM0NmI3YmZjZjM2NTE5OTgwYzQ0MCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RmluYW5jaWFsIERpc3RyaWN0IENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYTE3MzI4NWMwMmFiNGU3ODk3ODJiNmQ3ODFjMDU5YTguc2V0Q29udGVudChodG1sXzM2ZWUwYzIyZmY1YzQ2YjdiZmNmMzY1MTk5ODBjNDQwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzljNTEwMWYyMjE3ODQxMzZhM2VjMjg2MDJkOTBiMjM5LmJpbmRQb3B1cChwb3B1cF9hMTczMjg1YzAyYWI0ZTc4OTc4MmI2ZDc4MWMwNTlhOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yNGQ2YzliZGYyYWM0YjRiYjhjYjJhZWVhNzk2MzA4ZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjczOTY3MzA0NzYzODQyNiwtNzMuOTkwOTQ3MTA1MjgyNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF8wMmRkNTNhMjUxMmE0NzZiYjZlY2JkZTBiNDY0ODdlMyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9iN2RhNGU2N2UxYTc0YTU0OTU5YzAzYjVhYjY5ZTA0NSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81MWI5MjY1NTQwZmM0OTQwYWI1ZTA4MDQyYmIyMDE4ZCA9ICQoJzxkaXYgaWQ9Imh0bWxfNTFiOTI2NTU0MGZjNDk0MGFiNWUwODA0MmJiMjAxOGQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZsYXRpcm9uIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjdkYTRlNjdlMWE3NGE1NDk1OWMwM2I1YWI2OWUwNDUuc2V0Q29udGVudChodG1sXzUxYjkyNjU1NDBmYzQ5NDBhYjVlMDgwNDJiYjIwMThkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzI0ZDZjOWJkZjJhYzRiNGJiOGNiMmFlZWE3OTYzMDhlLmJpbmRQb3B1cChwb3B1cF9iN2RhNGU2N2UxYTc0YTU0OTU5YzAzYjVhYjY5ZTA0NSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iYjRmNzU2Y2ZjZGY0NTkwYmEyODY1MWVlZjc5OWZjMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjczNzIwOTgzMjcxNSwtNzMuOTgxMzc1OTQ4MzM1NDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTcxZmE2MTAxZGQ2NGQyMDgzNGE3M2EzYzU3MTBlYTkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOWEzOTQ4NTJlYjM0NDZiMWE1MmI5NGYwYWY5YjdmNjggPSAkKCc8ZGl2IGlkPSJodG1sXzlhMzk0ODUyZWIzNDQ2YjFhNTJiOTRmMGFmOWI3ZjY4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HcmFtZXJjeSBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzU3MWZhNjEwMWRkNjRkMjA4MzRhNzNhM2M1NzEwZWE5LnNldENvbnRlbnQoaHRtbF85YTM5NDg1MmViMzQ0NmIxYTUyYjk0ZjBhZjliN2Y2OCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iYjRmNzU2Y2ZjZGY0NTkwYmEyODY1MWVlZjc5OWZjMC5iaW5kUG9wdXAocG9wdXBfNTcxZmE2MTAxZGQ2NGQyMDgzNGE3M2EzYzU3MTBlYTkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTNlNmVmYWQyOTY2NDY5ODliYmFhYTk2NTVmMjdjMDkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43MjY5MzI4ODUzNjEyOCwtNzMuOTk5OTE0MDI5NDU5MDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfM2NmZTlmMmFiN2NiNDUwMzk4Y2U4ODg1NjU1YzE3YzIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzdmMTA4ZmU2MzIyNGZlYmIyNmEzYjFiNDVjMDMxZTMgPSAkKCc8ZGl2IGlkPSJodG1sXzM3ZjEwOGZlNjMyMjRmZWJiMjZhM2IxYjQ1YzAzMWUzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HcmVlbndpY2ggVmlsbGFnZSBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzNjZmU5ZjJhYjdjYjQ1MDM5OGNlODg4NTY1NWMxN2MyLnNldENvbnRlbnQoaHRtbF8zN2YxMDhmZTYzMjI0ZmViYjI2YTNiMWI0NWMwMzFlMyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lM2U2ZWZhZDI5NjY0Njk4OWJiYWFhOTY1NWYyN2MwOS5iaW5kUG9wdXAocG9wdXBfM2NmZTlmMmFiN2NiNDUwMzk4Y2U4ODg1NjU1YzE3YzIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfY2E2M2U2M2Q4MTA4NDM5N2EzNmNiODljMTFjZDRhOTIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC44MjM2MDQyODQ4MTE5MzUsLTczLjk0OTY4NzkxODgzMzY2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzkyMDZlM2U2ZDEwMTRhMWY5YmQzZTY0NTU0NTZmNjc0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Q3MTQ0YmFiOThkMDRiODE5MzMyYzM4MTFhYjdlY2Q2ID0gJCgnPGRpdiBpZD0iaHRtbF9kNzE0NGJhYjk4ZDA0YjgxOTMzMmMzODExYWI3ZWNkNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFtaWx0b24gSGVpZ2h0cyBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzkyMDZlM2U2ZDEwMTRhMWY5YmQzZTY0NTU0NTZmNjc0LnNldENvbnRlbnQoaHRtbF9kNzE0NGJhYjk4ZDA0YjgxOTMzMmMzODExYWI3ZWNkNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jYTYzZTYzZDgxMDg0Mzk3YTM2Y2I4OWMxMWNkNGE5Mi5iaW5kUG9wdXAocG9wdXBfOTIwNmUzZTZkMTAxNGExZjliZDNlNjQ1NTQ1NmY2NzQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZWRhNTk1MTI4OTMyNGE3MzlmMDFhN2U4ZDg2ODE4NmIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43NTY2NTgwODIyNzUxOSwtNzQuMDAwMTExMzYyMDI2MzddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmYyNWY0ZDRmOTg2NDgwMmE1ZTI5NWY1N2UzMGFmZDggPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOWUzMjFlNGY2YWU4NDA5YTliYWIwNjQwMzU3MmQyYTIgPSAkKCc8ZGl2IGlkPSJodG1sXzllMzIxZTRmNmFlODQwOWE5YmFiMDY0MDM1NzJkMmEyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IdWRzb24gWWFyZHMgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yZjI1ZjRkNGY5ODY0ODAyYTVlMjk1ZjU3ZTMwYWZkOC5zZXRDb250ZW50KGh0bWxfOWUzMjFlNGY2YWU4NDA5YTliYWIwNjQwMzU3MmQyYTIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZWRhNTk1MTI4OTMyNGE3MzlmMDFhN2U4ZDg2ODE4NmIuYmluZFBvcHVwKHBvcHVwXzJmMjVmNGQ0Zjk4NjQ4MDJhNWUyOTVmNTdlMzBhZmQ4KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzUxZGJkYzM5NWQwOTRlMzI4MDUwNzVmOGNjNDYzMDI0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuODY3NjgzOTY0NDk5MTUsLTczLjkyMTIxMDQyMjAzODk3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzUxODBmMWM0NDhiZDQyNGNiOTFmMTk4MGE5ZGE0YzY1ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQyNzRiNjIwN2Y2MjQ2MmRhODczMzllMWNlYWE1OTQ1ID0gJCgnPGRpdiBpZD0iaHRtbF80Mjc0YjYyMDdmNjI0NjJkYTg3MzM5ZTFjZWFhNTk0NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SW53b29kIENsdXN0ZXIgMTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNTE4MGYxYzQ0OGJkNDI0Y2I5MWYxOTgwYTlkYTRjNjUuc2V0Q29udGVudChodG1sXzQyNzRiNjIwN2Y2MjQ2MmRhODczMzllMWNlYWE1OTQ1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzUxZGJkYzM5NWQwOTRlMzI4MDUwNzVmOGNjNDYzMDI0LmJpbmRQb3B1cChwb3B1cF81MTgwZjFjNDQ4YmQ0MjRjYjkxZjE5ODBhOWRhNGM2NSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iNGJjNWE5NThhMTA0OTk5YjdmYmExOGVmZGIyMjZkNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc2ODExMjY1ODI4NzMzLC03My45NTg4NTk2ODgxMzc2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2MzZTQxMTEzNDkzYTRjYWRiZmNhODllYzE5MGEzNDdmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzlkYjlhOTVlMmE4ZDRiNmI5NmRjZWU4NGI0MjJjYTRhID0gJCgnPGRpdiBpZD0iaHRtbF85ZGI5YTk1ZTJhOGQ0YjZiOTZkY2VlODRiNDIyY2E0YSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGVub3ggSGlsbCBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2MzZTQxMTEzNDkzYTRjYWRiZmNhODllYzE5MGEzNDdmLnNldENvbnRlbnQoaHRtbF85ZGI5YTk1ZTJhOGQ0YjZiOTZkY2VlODRiNDIyY2E0YSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iNGJjNWE5NThhMTA0OTk5YjdmYmExOGVmZGIyMjZkNS5iaW5kUG9wdXAocG9wdXBfYzNlNDExMTM0OTNhNGNhZGJmY2E4OWVjMTkwYTM0N2YpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTdjOTE5NjkyNjFhNGNmN2ExZGZlOTBjODA4ODA3MjEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43NzM1Mjg4ODk0MjE2NiwtNzMuOTg1MzM3NzcwMDEyNjJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMjY2NWFjZjFhYzhlNDE0NWFiNDQ3MWI1Y2VmNjVjZWIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDA0MDZlYzkxZDcxNDJlYjllZGE4OGQ3ZGUyNjA3MTcgPSAkKCc8ZGl2IGlkPSJodG1sXzAwNDA2ZWM5MWQ3MTQyZWI5ZWRhODhkN2RlMjYwNzE3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5MaW5jb2xuIFNxdWFyZSBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzI2NjVhY2YxYWM4ZTQxNDVhYjQ0NzFiNWNlZjY1Y2ViLnNldENvbnRlbnQoaHRtbF8wMDQwNmVjOTFkNzE0MmViOWVkYTg4ZDdkZTI2MDcxNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hN2M5MTk2OTI2MWE0Y2Y3YTFkZmU5MGM4MDg4MDcyMS5iaW5kUG9wdXAocG9wdXBfMjY2NWFjZjFhYzhlNDE0NWFiNDQ3MWI1Y2VmNjVjZWIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTVmZTVkOWE5MGFiNGZiMzllMTI2NjczODA2ZmJlOTggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43MTkzMjM3OTM5NTkwNywtNzMuOTk3MzA0NjcyMDgwNzNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfY2EwMjBiMWRkNjUwNDAxOWJjN2FjNmI2ODA5ZTBiOWQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTg0YmQ3ZjU5OTgzNDcwMGFmZmVhZDlkYzc3OTg5M2UgPSAkKCc8ZGl2IGlkPSJodG1sX2E4NGJkN2Y1OTk4MzQ3MDBhZmZlYWQ5ZGM3Nzk4OTNlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5MaXR0bGUgSXRhbHkgQ2x1c3RlciAxPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jYTAyMGIxZGQ2NTA0MDE5YmM3YWM2YjY4MDllMGI5ZC5zZXRDb250ZW50KGh0bWxfYTg0YmQ3ZjU5OTgzNDcwMGFmZmVhZDlkYzc3OTg5M2UpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTVmZTVkOWE5MGFiNGZiMzllMTI2NjczODA2ZmJlOTguYmluZFBvcHVwKHBvcHVwX2NhMDIwYjFkZDY1MDQwMTliYzdhYzZiNjgwOWUwYjlkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzRiZWVjNGI1MGJhYTRmNDE4NGQwODZkNWY1ZjBiYzk1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzE3ODA2NzQ4OTI3NjUsLTczLjk4MDg5MDMxOTk5MjkxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzE5YmFhMGEwODVkYzRhZTE5ODU4NDI0NGVlYTRkMDczID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzViZDFiNGVkMGUzYzQ4NmI5OGI2Y2ZkZjkzZGFlNzg0ID0gJCgnPGRpdiBpZD0iaHRtbF81YmQxYjRlZDBlM2M0ODZiOThiNmNmZGY5M2RhZTc4NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TG93ZXIgRWFzdCBTaWRlIENsdXN0ZXIgMTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTliYWEwYTA4NWRjNGFlMTk4NTg0MjQ0ZWVhNGQwNzMuc2V0Q29udGVudChodG1sXzViZDFiNGVkMGUzYzQ4NmI5OGI2Y2ZkZjkzZGFlNzg0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzRiZWVjNGI1MGJhYTRmNDE4NGQwODZkNWY1ZjBiYzk1LmJpbmRQb3B1cChwb3B1cF8xOWJhYTBhMDg1ZGM0YWUxOTg1ODQyNDRlZWE0ZDA3Myk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zNzhlZWM3NTQwN2Q0MjRkYWVlYmRhNTM4ODZhYjZjOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc5NzMwNzA0MTcwMjg2NSwtNzMuOTY0Mjg2MTc3NDA2NTVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOWI3NzBjZWU5ZjdhNGU2ZGEzY2ZiODRjZDA1NTUwYjEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTk2NmE3ZTJkZDc3NDIxNzg0YmYxYmExZjk0MTRmOTIgPSAkKCc8ZGl2IGlkPSJodG1sXzU5NjZhN2UyZGQ3NzQyMTc4NGJmMWJhMWY5NDE0ZjkyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NYW5oYXR0YW4gVmFsbGV5IENsdXN0ZXIgMTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOWI3NzBjZWU5ZjdhNGU2ZGEzY2ZiODRjZDA1NTUwYjEuc2V0Q29udGVudChodG1sXzU5NjZhN2UyZGQ3NzQyMTc4NGJmMWJhMWY5NDE0ZjkyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzM3OGVlYzc1NDA3ZDQyNGRhZWViZGE1Mzg4NmFiNmM4LmJpbmRQb3B1cChwb3B1cF85Yjc3MGNlZTlmN2E0ZTZkYTNjZmI4NGNkMDU1NTBiMSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8zNzUyMWVjYzhlZDE0ODllYjJhYTExNmM4ZmIyZWJmMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjgxNjkzNDQyOTQ5NzgsLTczLjk1NzM4NTM5MzUxODhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDI5M2Y4ZThhZWU4NGIxOTkyYmRjYzhmMWZiNDdkNjMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZTBhMmQ4NWY3ODNhNGQ2YWIyMTk5OThmMDdlNDgxOWYgPSAkKCc8ZGl2IGlkPSJodG1sX2UwYTJkODVmNzgzYTRkNmFiMjE5OTk4ZjA3ZTQ4MTlmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NYW5oYXR0YW52aWxsZSBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQyOTNmOGU4YWVlODRiMTk5MmJkY2M4ZjFmYjQ3ZDYzLnNldENvbnRlbnQoaHRtbF9lMGEyZDg1Zjc4M2E0ZDZhYjIxOTk5OGYwN2U0ODE5Zik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8zNzUyMWVjYzhlZDE0ODllYjJhYTExNmM4ZmIyZWJmMC5iaW5kUG9wdXAocG9wdXBfNDI5M2Y4ZThhZWU4NGIxOTkyYmRjYzhmMWZiNDdkNjMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZGY1ZDE2NDY2Nzg0NDVkNjlmNGVmODNhODA5YTI2YjggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC44NzY1NTA3Nzg3OTk2NCwtNzMuOTEwNjU5NjU4NjI5ODFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNWRiZGQyZTQxMjZmNDJkOGI0YWUzYjZiNzYzYzA4YzUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzIyM2EzMjk2OWFmNDU1MGI0NmNlNDM2YzBkZGYzOGQgPSAkKCc8ZGl2IGlkPSJodG1sXzMyMjNhMzI5NjlhZjQ1NTBiNDZjZTQzNmMwZGRmMzhkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NYXJibGUgSGlsbCBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzVkYmRkMmU0MTI2ZjQyZDhiNGFlM2I2Yjc2M2MwOGM1LnNldENvbnRlbnQoaHRtbF8zMjIzYTMyOTY5YWY0NTUwYjQ2Y2U0MzZjMGRkZjM4ZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9kZjVkMTY0NjY3ODQ0NWQ2OWY0ZWY4M2E4MDlhMjZiOC5iaW5kUG9wdXAocG9wdXBfNWRiZGQyZTQxMjZmNDJkOGI0YWUzYjZiNzYzYzA4YzUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYjA0ZGMxNjUyOWYxNDdkNWIzNjk2MTMwZjE0ODIzMGYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43NTQ2OTExMDI3MDYyMywtNzMuOTgxNjY4ODI3MzAzMDRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZmFiNjNmYWIxOTk3NGVkNWJkZGE1OGQ3ZTUzMjA4OTAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTRkMTdlMThlM2I4NDBmOWFlYmYyZjQyNjBlM2JlOTggPSAkKCc8ZGl2IGlkPSJodG1sXzU0ZDE3ZTE4ZTNiODQwZjlhZWJmMmY0MjYwZTNiZTk4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NaWR0b3duIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmFiNjNmYWIxOTk3NGVkNWJkZGE1OGQ3ZTUzMjA4OTAuc2V0Q29udGVudChodG1sXzU0ZDE3ZTE4ZTNiODQwZjlhZWJmMmY0MjYwZTNiZTk4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2IwNGRjMTY1MjlmMTQ3ZDViMzY5NjEzMGYxNDgyMzBmLmJpbmRQb3B1cChwb3B1cF9mYWI2M2ZhYjE5OTc0ZWQ1YmRkYTU4ZDdlNTMyMDg5MCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80NmJkYjI2N2JlMjE0ZDhiYTA3NGU1MmU1NzFhNDVkNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc0ODUwOTY2NDMxMjIsLTczLjk4ODcxMzEzMjg1MjQ3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2QwNTA1MWVlMWM0NTQ4YjU5MzIzOWVlNmYwYmM3NzVlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzYwZTkxNjI4ZGE4YjQyZTNiM2ZjNDMzNDUyZjk2YzNkID0gJCgnPGRpdiBpZD0iaHRtbF82MGU5MTYyOGRhOGI0MmUzYjNmYzQzMzQ1MmY5NmMzZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TWlkdG93biBTb3V0aCBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QwNTA1MWVlMWM0NTQ4YjU5MzIzOWVlNmYwYmM3NzVlLnNldENvbnRlbnQoaHRtbF82MGU5MTYyOGRhOGI0MmUzYjNmYzQzMzQ1MmY5NmMzZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80NmJkYjI2N2JlMjE0ZDhiYTA3NGU1MmU1NzFhNDVkNS5iaW5kUG9wdXAocG9wdXBfZDA1MDUxZWUxYzQ1NDhiNTkzMjM5ZWU2ZjBiYzc3NWUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfY2FkZGMxNzVjNDYzNGNiZmE2MDdkMzk4NWRlZGUxOTMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC44MDc5OTk3MzgxNjU4MjYsLTczLjk2Mzg5NjI3OTA1MzMyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZjM2QxZmY0NDE0MTQ1ZGE4M2RhNGQ4NTUxNGI2ZGRmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Y2ZjNiOTFmNDk5MDRkZWM4MGQzNjk0MGQ4OTJmYTY0ID0gJCgnPGRpdiBpZD0iaHRtbF9mNmYzYjkxZjQ5OTA0ZGVjODBkMzY5NDBkODkyZmE2NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TW9ybmluZ3NpZGUgSGVpZ2h0cyBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZjM2QxZmY0NDE0MTQ1ZGE4M2RhNGQ4NTUxNGI2ZGRmLnNldENvbnRlbnQoaHRtbF9mNmYzYjkxZjQ5OTA0ZGVjODBkMzY5NDBkODkyZmE2NCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9jYWRkYzE3NWM0NjM0Y2JmYTYwN2QzOTg1ZGVkZTE5My5iaW5kUG9wdXAocG9wdXBfNmMzZDFmZjQ0MTQxNDVkYTgzZGE0ZDg1NTE0YjZkZGYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDA4Y2VhY2JiY2RhNDliMThiYWQxODM1ZjJmNWM2YzEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43NDgzMDMwNzcyNTIxNzQsLTczLjk3ODMzMjA3OTI0MTI3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzM3ZTgyM2IxMzEwNDQ3M2Y5NDc0OWQ3YzE0MjYyNWZkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQ0NmYyOWZmM2Q3ZTQ0ODhiYTBjMzQ0OTU0ZTNkZTg5ID0gJCgnPGRpdiBpZD0iaHRtbF80NDZmMjlmZjNkN2U0NDg4YmEwYzM0NDk1NGUzZGU4OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TXVycmF5IEhpbGwgQ2x1c3RlciAxPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zN2U4MjNiMTMxMDQ0NzNmOTQ3NDlkN2MxNDI2MjVmZC5zZXRDb250ZW50KGh0bWxfNDQ2ZjI5ZmYzZDdlNDQ4OGJhMGMzNDQ5NTRlM2RlODkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDA4Y2VhY2JiY2RhNDliMThiYWQxODM1ZjJmNWM2YzEuYmluZFBvcHVwKHBvcHVwXzM3ZTgyM2IxMzEwNDQ3M2Y5NDc0OWQ3YzE0MjYyNWZkKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQzYjcwNzdmYjczMzQzMmM4OGZlODViMWQwMmQ3NDI2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzIzMjU5MDE4ODU3NjgsLTczLjk4ODQzMzY4MDIzNTk3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzgzMGM2ODQxNzc4NjQ5NzFiZTg5N2IzYjYxOTJhOWU0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2JlZjAyNjZhZTUwMzQ1ZjFhMGUzMWNiMmNhNDgzNDkyID0gJCgnPGRpdiBpZD0iaHRtbF9iZWYwMjY2YWU1MDM0NWYxYTBlMzFjYjJjYTQ4MzQ5MiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Tm9obyBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzgzMGM2ODQxNzc4NjQ5NzFiZTg5N2IzYjYxOTJhOWU0LnNldENvbnRlbnQoaHRtbF9iZWYwMjY2YWU1MDM0NWYxYTBlMzFjYjJjYTQ4MzQ5Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80M2I3MDc3ZmI3MzM0MzJjODhmZTg1YjFkMDJkNzQyNi5iaW5kUG9wdXAocG9wdXBfODMwYzY4NDE3Nzg2NDk3MWJlODk3YjNiNjE5MmE5ZTQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMTFjNmJkOThiOGRmNDE4ZmI5NmM5MWRkNjJlZmExNGQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43NjIxNTk2MDU3NjI4MywtNzMuOTQ5MTY3NjkyMjc5NTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNmU2OWFlN2ZlYjdmNGEzMTk1OWIzNDI1MmJlYWU4Y2MgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTAwYzA3ZDRiZTI0NDVjYWE2NDcyYjEyY2Y3M2VhY2EgPSAkKCc8ZGl2IGlkPSJodG1sX2EwMGMwN2Q0YmUyNDQ1Y2FhNjQ3MmIxMmNmNzNlYWNhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Sb29zZXZlbHQgSXNsYW5kIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNmU2OWFlN2ZlYjdmNGEzMTk1OWIzNDI1MmJlYWU4Y2Muc2V0Q29udGVudChodG1sX2EwMGMwN2Q0YmUyNDQ1Y2FhNjQ3MmIxMmNmNzNlYWNhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzExYzZiZDk4YjhkZjQxOGZiOTZjOTFkZDYyZWZhMTRkLmJpbmRQb3B1cChwb3B1cF82ZTY5YWU3ZmViN2Y0YTMxOTU5YjM0MjUyYmVhZThjYyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kNjU4ZGJmY2E3NDE0MmQ5YTQ1YWRjODA4NGJmODNkYyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjcyMjE4Mzg0MTMxNzk0LC03NC4wMDA2NTY2Njk1OTc1OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjODAwMGZmIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF8wMmRkNTNhMjUxMmE0NzZiYjZlY2JkZTBiNDY0ODdlMyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9mNzA3ZjcxNzQzYTM0YmYxOTUxMDhlODZhZmE4NmU2ZSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85ZTY1N2JlZjMxYzY0YzBlOWFlNDY3MTI1NjQwNzU2OSA9ICQoJzxkaXYgaWQ9Imh0bWxfOWU2NTdiZWYzMWM2NGMwZTlhZTQ2NzEyNTY0MDc1NjkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNvaG8gQ2x1c3RlciAxPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mNzA3ZjcxNzQzYTM0YmYxOTUxMDhlODZhZmE4NmU2ZS5zZXRDb250ZW50KGh0bWxfOWU2NTdiZWYzMWM2NGMwZTlhZTQ2NzEyNTY0MDc1NjkpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZDY1OGRiZmNhNzQxNDJkOWE0NWFkYzgwODRiZjgzZGMuYmluZFBvcHVwKHBvcHVwX2Y3MDdmNzE3NDNhMzRiZjE5NTEwOGU4NmFmYTg2ZTZlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhjNzk1MWIxNTY5MzRjODU4ZGYwMTgyMGIyMmIyZTlmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzMwOTk5NTU0NzcwNjEsLTczLjk3NDA1MTcwNDY5MjAzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MGZmYjQiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODBmZmI0IiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzhjN2M0ZTFkNTcyOTQzOThiYWUyMmYyMTY2YTYwMGE3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2MxN2ZiYTU4NDVhNDRiZTFhZTk2ZWI2ZGJjNWRjMGI0ID0gJCgnPGRpdiBpZD0iaHRtbF9jMTdmYmE1ODQ1YTQ0YmUxYWU5NmViNmRiYzVkYzBiNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+U3R1eXZlc2FudCBUb3duIENsdXN0ZXIgMjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfOGM3YzRlMWQ1NzI5NDM5OGJhZTIyZjIxNjZhNjAwYTcuc2V0Q29udGVudChodG1sX2MxN2ZiYTU4NDVhNDRiZTFhZTk2ZWI2ZGJjNWRjMGI0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzhjNzk1MWIxNTY5MzRjODU4ZGYwMTgyMGIyMmIyZTlmLmJpbmRQb3B1cChwb3B1cF84YzdjNGUxZDU3Mjk0Mzk4YmFlMjJmMjE2NmE2MDBhNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84NDZjNDE3YTY1YWQ0NmIxOWZlOGM2NTZmZGU5YWMzNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc2MDI4MDMzMTMxMzc0LC03My45NjM1NTYxNDA5NDMwM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF8wMmRkNTNhMjUxMmE0NzZiYjZlY2JkZTBiNDY0ODdlMyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xNWM3OGRjZGMwNjI0OWJhOTU1NTQwNjMxZjZjZmIyYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82ZDhmYWI5YzY2MzU0OTVhOTlmMGViZDhjYzI0NTZkOCA9ICQoJzxkaXYgaWQ9Imh0bWxfNmQ4ZmFiOWM2NjM1NDk1YTk5ZjBlYmQ4Y2MyNDU2ZDgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN1dHRvbiBQbGFjZSBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzE1Yzc4ZGNkYzA2MjQ5YmE5NTU1NDA2MzFmNmNmYjJhLnNldENvbnRlbnQoaHRtbF82ZDhmYWI5YzY2MzU0OTVhOTlmMGViZDhjYzI0NTZkOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84NDZjNDE3YTY1YWQ0NmIxOWZlOGM2NTZmZGU5YWMzNS5iaW5kUG9wdXAocG9wdXBfMTVjNzhkY2RjMDYyNDliYTk1NTU0MDYzMWY2Y2ZiMmEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMTlmZmRlNDBkODRiNDQwOWE4MzdmNzMwNjQ3MmYwNWUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43MjE1MjE5Njc0NDMyMTYsLTc0LjAxMDY4MzI4NTU5MDg3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I3ODA0ZmJlZTgxZjQwYWRiNWNjNmIyNDkzNjlkNzVjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ZhOGQyNDVjYzE1ODQ5ZWI5MjczMTMwNjhmNzFmNjE2ID0gJCgnPGRpdiBpZD0iaHRtbF9mYThkMjQ1Y2MxNTg0OWViOTI3MzEzMDY4ZjcxZjYxNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VHJpYmVjYSBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2I3ODA0ZmJlZTgxZjQwYWRiNWNjNmIyNDkzNjlkNzVjLnNldENvbnRlbnQoaHRtbF9mYThkMjQ1Y2MxNTg0OWViOTI3MzEzMDY4ZjcxZjYxNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xOWZmZGU0MGQ4NGI0NDA5YTgzN2Y3MzA2NDcyZjA1ZS5iaW5kUG9wdXAocG9wdXBfYjc4MDRmYmVlODFmNDBhZGI1Y2M2YjI0OTM2OWQ3NWMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMmIyZDc0NDhlMDA3NGVmY2I4ZjBlYTQxZjk0MTIzNTMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43NDY5MTc0MTA3NDAxOTUsLTczLjk3MTIxOTI4NzIyMjY1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzkzNmMxZDZjMmYwYTRlYmU4ZGEwYWRjMmY1NGZkODAwID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2FlNDExMjNkZDM2MDQ1OTU5Yzc0Y2FlYmNhNjlkMTdjID0gJCgnPGRpdiBpZD0iaHRtbF9hZTQxMTIzZGQzNjA0NTk1OWM3NGNhZWJjYTY5ZDE3YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VHVkb3IgQ2l0eSBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzkzNmMxZDZjMmYwYTRlYmU4ZGEwYWRjMmY1NGZkODAwLnNldENvbnRlbnQoaHRtbF9hZTQxMTIzZGQzNjA0NTk1OWM3NGNhZWJjYTY5ZDE3Yyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yYjJkNzQ0OGUwMDc0ZWZjYjhmMGVhNDFmOTQxMjM1My5iaW5kUG9wdXAocG9wdXBfOTM2YzFkNmMyZjBhNGViZThkYTBhZGMyZjU0ZmQ4MDApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfY2Q3NTg0ZjE5ZDgwNDk3YmFkYjYyY2Q2MTk4MjNhODggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC43NTIwNDIzNjk1MDcyMiwtNzMuOTY3NzA4MjQ1ODE4MzRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYmMzYjY0MjE3MDVmNDZiOTliZjYxOTEwMjQ3NzhjNDAgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzI2YzZmODM2ZDk1NGUxYjk2MjkzZjY2Mzk2OTEzNzggPSAkKCc8ZGl2IGlkPSJodG1sXzMyNmM2ZjgzNmQ5NTRlMWI5NjI5M2Y2NjM5NjkxMzc4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UdXJ0bGUgQmF5IENsdXN0ZXIgMTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYmMzYjY0MjE3MDVmNDZiOTliZjYxOTEwMjQ3NzhjNDAuc2V0Q29udGVudChodG1sXzMyNmM2ZjgzNmQ5NTRlMWI5NjI5M2Y2NjM5NjkxMzc4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2NkNzU4NGYxOWQ4MDQ5N2JhZGI2MmNkNjE5ODIzYTg4LmJpbmRQb3B1cChwb3B1cF9iYzNiNjQyMTcwNWY0NmI5OWJmNjE5MTAyNDc3OGM0MCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kZDAxMWQ2MmEwZTM0MzliODA5ZWI3Y2M0Mjg5ODhiMyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc3NTYzODU3MzMwMTgwNSwtNzMuOTYwNTA3NjMxMzVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDhiYzI3MmY2NjIxNGE2ZmIwNmJmYzU3NDBhMDFmZmEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzI3YWYwMWViOGVjNGFlNTk4MWJmZDBmYzFjMDFmMTUgPSAkKCc8ZGl2IGlkPSJodG1sXzMyN2FmMDFlYjhlYzRhZTU5ODFiZmQwZmMxYzAxZjE1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5VcHBlciBFYXN0IFNpZGUgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kOGJjMjcyZjY2MjE0YTZmYjA2YmZjNTc0MGEwMWZmYS5zZXRDb250ZW50KGh0bWxfMzI3YWYwMWViOGVjNGFlNTk4MWJmZDBmYzFjMDFmMTUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZGQwMTFkNjJhMGUzNDM5YjgwOWViN2NjNDI4OTg4YjMuYmluZFBvcHVwKHBvcHVwX2Q4YmMyNzJmNjYyMTRhNmZiMDZiZmM1NzQwYTAxZmZhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2VhNzUyNGE2N2QxZTQ0OWVhMGRmMDczNmIyOTIxNWQzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzg3NjU3OTk4NTM0ODU0LC03My45NzcwNTkyMzYzMDYwM10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjODAwMGZmIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF8wMmRkNTNhMjUxMmE0NzZiYjZlY2JkZTBiNDY0ODdlMyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84YzQ4MzgwMmYxYzA0YTkxOWIxYzQ2OGY0ZjMyOGNlYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82ZmJhNGZlMTZlNjY0N2Q5YmY2ODhjNmVkNDY0NTc1MSA9ICQoJzxkaXYgaWQ9Imh0bWxfNmZiYTRmZTE2ZTY2NDdkOWJmNjg4YzZlZDQ2NDU3NTEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlVwcGVyIFdlc3QgU2lkZSBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzhjNDgzODAyZjFjMDRhOTE5YjFjNDY4ZjRmMzI4Y2VhLnNldENvbnRlbnQoaHRtbF82ZmJhNGZlMTZlNjY0N2Q5YmY2ODhjNmVkNDY0NTc1MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lYTc1MjRhNjdkMWU0NDllYTBkZjA3MzZiMjkyMTVkMy5iaW5kUG9wdXAocG9wdXBfOGM0ODM4MDJmMWMwNGE5MTliMWM0NjhmNGYzMjhjZWEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfM2JlNzgwZTljMzQ0NGY5NmFkMTEyZGU3NTgzODZjMjAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0MC44NTE5MDI1MjU1NTMwNSwtNzMuOTM2OTAwMjc5ODUyMzRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjdiZWUxMTNiZjY3NDViZWI0YjdhYmZkZDE0M2NjM2IgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTViOWQ2NDE3ZmEzNDllZGE4Y2JkZTRhNDY0MTcxMGQgPSAkKCc8ZGl2IGlkPSJodG1sXzU1YjlkNjQxN2ZhMzQ5ZWRhOGNiZGU0YTQ2NDE3MTBkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XYXNoaW5ndG9uIEhlaWdodHMgQ2x1c3RlciAxPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iN2JlZTExM2JmNjc0NWJlYjRiN2FiZmRkMTQzY2MzYi5zZXRDb250ZW50KGh0bWxfNTViOWQ2NDE3ZmEzNDllZGE4Y2JkZTRhNDY0MTcxMGQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfM2JlNzgwZTljMzQ0NGY5NmFkMTEyZGU3NTgzODZjMjAuYmluZFBvcHVwKHBvcHVwX2I3YmVlMTEzYmY2NzQ1YmViNGI3YWJmZGQxNDNjYzNiKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzNjNGM3NmRlNDg5NDQ3NDNiYjgzNmM3YWQ2NDk3N2RjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDAuNzM0NDMzOTM1NzI0MzQsLTc0LjAwNjE3OTk4MTI2ODEyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MDAwZmYiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODAwMGZmIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzAyZGQ1M2EyNTEyYTQ3NmJiNmVjYmRlMGI0NjQ4N2UzKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2ZlNTIxZDRiMGVhYTQ2ZGI4ODliOTVjMzJmNThiNTE5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA2ZTk1M2ZlYmJmZDQwNzU4N2E4NTcyYzllMDkyMmYzID0gJCgnPGRpdiBpZD0iaHRtbF8wNmU5NTNmZWJiZmQ0MDc1ODdhODU3MmM5ZTA5MjJmMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V2VzdCBWaWxsYWdlIENsdXN0ZXIgMTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmU1MjFkNGIwZWFhNDZkYjg4OWI5NWMzMmY1OGI1MTkuc2V0Q29udGVudChodG1sXzA2ZTk1M2ZlYmJmZDQwNzU4N2E4NTcyYzllMDkyMmYzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzNjNGM3NmRlNDg5NDQ3NDNiYjgzNmM3YWQ2NDk3N2RjLmJpbmRQb3B1cChwb3B1cF9mZTUyMWQ0YjBlYWE0NmRiODg5Yjk1YzMyZjU4YjUxOSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wNjkxMmE5MGUzNGY0NGNkYWFjNzRkOTkyZWE2OWVjNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQwLjc3NTkyOTg0OTg4NDg3NSwtNzMuOTQ3MTE3ODQ0NzE4MjZdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfMDJkZDUzYTI1MTJhNDc2YmI2ZWNiZGUwYjQ2NDg3ZTMpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMjU0ZDRkOTNjMGE5NGI2ZmI0NzFkNWFjZjRjNzFhODIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMDJmYjUwNjllM2Y2NDU3M2I2N2JmYjNiODllZWFlZjYgPSAkKCc8ZGl2IGlkPSJodG1sXzAyZmI1MDY5ZTNmNjQ1NzNiNjdiZmIzYjg5ZWVhZWY2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Zb3JrdmlsbGUgQ2x1c3RlciAxPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yNTRkNGQ5M2MwYTk0YjZmYjQ3MWQ1YWNmNGM3MWE4Mi5zZXRDb250ZW50KGh0bWxfMDJmYjUwNjllM2Y2NDU3M2I2N2JmYjNiODllZWFlZjYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDY5MTJhOTBlMzRmNDRjZGFhYzc0ZDk5MmVhNjllYzUuYmluZFBvcHVwKHBvcHVwXzI1NGQ0ZDkzYzBhOTRiNmZiNDcxZDVhY2Y0YzcxYTgyKTsKCiAgICAgICAgICAgIAogICAgICAgIAo8L3NjcmlwdD4= onload="this.contentDocument.open();this.contentDocument.write(atob(this.getAttribute('data-html')));this.contentDocument.close();" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>




```python
manhattan_merged
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Restarant</th>
      <th>Hotel</th>
      <th>Sites</th>
      <th>Cluster Labels</th>
      <th>Borough</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Battery Park City</td>
      <td>0.075758</td>
      <td>0.060606</td>
      <td>0.212121</td>
      <td>2</td>
      <td>Manhattan</td>
      <td>40.711932</td>
      <td>-74.016869</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Carnegie Hill</td>
      <td>0.277108</td>
      <td>0.012048</td>
      <td>0.108434</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.782683</td>
      <td>-73.953256</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Central Harlem</td>
      <td>0.363636</td>
      <td>0.000000</td>
      <td>0.181818</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.815976</td>
      <td>-73.943211</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Chelsea</td>
      <td>0.190000</td>
      <td>0.010000</td>
      <td>0.200000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.744035</td>
      <td>-74.003116</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Chinatown</td>
      <td>0.380000</td>
      <td>0.020000</td>
      <td>0.130000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.715618</td>
      <td>-73.994279</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Civic Center</td>
      <td>0.237113</td>
      <td>0.051546</td>
      <td>0.144330</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.715229</td>
      <td>-74.005415</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Clinton</td>
      <td>0.220000</td>
      <td>0.030000</td>
      <td>0.220000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.759101</td>
      <td>-73.996119</td>
    </tr>
    <tr>
      <th>7</th>
      <td>East Harlem</td>
      <td>0.365854</td>
      <td>0.000000</td>
      <td>0.121951</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.792249</td>
      <td>-73.944182</td>
    </tr>
    <tr>
      <th>8</th>
      <td>East Village</td>
      <td>0.410000</td>
      <td>0.000000</td>
      <td>0.220000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.727847</td>
      <td>-73.982226</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Financial District</td>
      <td>0.280000</td>
      <td>0.040000</td>
      <td>0.140000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.707107</td>
      <td>-74.010665</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Flatiron</td>
      <td>0.240000</td>
      <td>0.010000</td>
      <td>0.090000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.739673</td>
      <td>-73.990947</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Gramercy</td>
      <td>0.267442</td>
      <td>0.023256</td>
      <td>0.151163</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.737210</td>
      <td>-73.981376</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Greenwich Village</td>
      <td>0.400000</td>
      <td>0.000000</td>
      <td>0.120000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.726933</td>
      <td>-73.999914</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Hamilton Heights</td>
      <td>0.372881</td>
      <td>0.000000</td>
      <td>0.152542</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.823604</td>
      <td>-73.949688</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Hudson Yards</td>
      <td>0.214286</td>
      <td>0.053571</td>
      <td>0.160714</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.756658</td>
      <td>-74.000111</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Inwood</td>
      <td>0.385965</td>
      <td>0.000000</td>
      <td>0.122807</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.867684</td>
      <td>-73.921210</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Lenox Hill</td>
      <td>0.320000</td>
      <td>0.000000</td>
      <td>0.080000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.768113</td>
      <td>-73.958860</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Lincoln Square</td>
      <td>0.189474</td>
      <td>0.010526</td>
      <td>0.168421</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.773529</td>
      <td>-73.985338</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Little Italy</td>
      <td>0.330000</td>
      <td>0.020000</td>
      <td>0.060000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.719324</td>
      <td>-73.997305</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Lower East Side</td>
      <td>0.326531</td>
      <td>0.000000</td>
      <td>0.183673</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.717807</td>
      <td>-73.980890</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Manhattan Valley</td>
      <td>0.439024</td>
      <td>0.024390</td>
      <td>0.073171</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.797307</td>
      <td>-73.964286</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Manhattanville</td>
      <td>0.466667</td>
      <td>0.000000</td>
      <td>0.088889</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.816934</td>
      <td>-73.957385</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Marble Hill</td>
      <td>0.153846</td>
      <td>0.000000</td>
      <td>0.038462</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.876551</td>
      <td>-73.910660</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Midtown</td>
      <td>0.240000</td>
      <td>0.050000</td>
      <td>0.110000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.754691</td>
      <td>-73.981669</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Midtown South</td>
      <td>0.306122</td>
      <td>0.051020</td>
      <td>0.112245</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.748510</td>
      <td>-73.988713</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Morningside Heights</td>
      <td>0.268293</td>
      <td>0.000000</td>
      <td>0.097561</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.808000</td>
      <td>-73.963896</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Murray Hill</td>
      <td>0.337662</td>
      <td>0.051948</td>
      <td>0.077922</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.748303</td>
      <td>-73.978332</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Noho</td>
      <td>0.390000</td>
      <td>0.020000</td>
      <td>0.090000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.723259</td>
      <td>-73.988434</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Roosevelt Island</td>
      <td>0.103448</td>
      <td>0.034483</td>
      <td>0.068966</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.762160</td>
      <td>-73.949168</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Soho</td>
      <td>0.306818</td>
      <td>0.022727</td>
      <td>0.102273</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.722184</td>
      <td>-74.000657</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Stuyvesant Town</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.285714</td>
      <td>2</td>
      <td>Manhattan</td>
      <td>40.731000</td>
      <td>-73.974052</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Sutton Place</td>
      <td>0.270000</td>
      <td>0.030000</td>
      <td>0.100000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.760280</td>
      <td>-73.963556</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Tribeca</td>
      <td>0.259740</td>
      <td>0.025974</td>
      <td>0.207792</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.721522</td>
      <td>-74.010683</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Tudor City</td>
      <td>0.378378</td>
      <td>0.013514</td>
      <td>0.108108</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.746917</td>
      <td>-73.971219</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Turtle Bay</td>
      <td>0.330000</td>
      <td>0.020000</td>
      <td>0.150000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.752042</td>
      <td>-73.967708</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Upper East Side</td>
      <td>0.288889</td>
      <td>0.022222</td>
      <td>0.100000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.775639</td>
      <td>-73.960508</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Upper West Side</td>
      <td>0.404762</td>
      <td>0.011905</td>
      <td>0.166667</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.787658</td>
      <td>-73.977059</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Washington Heights</td>
      <td>0.298851</td>
      <td>0.000000</td>
      <td>0.057471</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.851903</td>
      <td>-73.936900</td>
    </tr>
    <tr>
      <th>38</th>
      <td>West Village</td>
      <td>0.330000</td>
      <td>0.000000</td>
      <td>0.200000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.734434</td>
      <td>-74.006180</td>
    </tr>
    <tr>
      <th>39</th>
      <td>Yorkville</td>
      <td>0.350000</td>
      <td>0.000000</td>
      <td>0.090000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.775930</td>
      <td>-73.947118</td>
    </tr>
  </tbody>
</table>
</div>




```python
manhattan_merged.loc[manhattan_merged['Cluster Labels'] == 0, manhattan_merged.columns[list(range(0, manhattan_merged.shape[1]))]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Restarant</th>
      <th>Hotel</th>
      <th>Sites</th>
      <th>Cluster Labels</th>
      <th>Borough</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Carnegie Hill</td>
      <td>0.277108</td>
      <td>0.012048</td>
      <td>0.108434</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.782683</td>
      <td>-73.953256</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Chelsea</td>
      <td>0.190000</td>
      <td>0.010000</td>
      <td>0.200000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.744035</td>
      <td>-74.003116</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Civic Center</td>
      <td>0.237113</td>
      <td>0.051546</td>
      <td>0.144330</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.715229</td>
      <td>-74.005415</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Clinton</td>
      <td>0.220000</td>
      <td>0.030000</td>
      <td>0.220000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.759101</td>
      <td>-73.996119</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Financial District</td>
      <td>0.280000</td>
      <td>0.040000</td>
      <td>0.140000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.707107</td>
      <td>-74.010665</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Flatiron</td>
      <td>0.240000</td>
      <td>0.010000</td>
      <td>0.090000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.739673</td>
      <td>-73.990947</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Gramercy</td>
      <td>0.267442</td>
      <td>0.023256</td>
      <td>0.151163</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.737210</td>
      <td>-73.981376</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Hudson Yards</td>
      <td>0.214286</td>
      <td>0.053571</td>
      <td>0.160714</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.756658</td>
      <td>-74.000111</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Lincoln Square</td>
      <td>0.189474</td>
      <td>0.010526</td>
      <td>0.168421</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.773529</td>
      <td>-73.985338</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Marble Hill</td>
      <td>0.153846</td>
      <td>0.000000</td>
      <td>0.038462</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.876551</td>
      <td>-73.910660</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Midtown</td>
      <td>0.240000</td>
      <td>0.050000</td>
      <td>0.110000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.754691</td>
      <td>-73.981669</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Morningside Heights</td>
      <td>0.268293</td>
      <td>0.000000</td>
      <td>0.097561</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.808000</td>
      <td>-73.963896</td>
    </tr>
    <tr>
      <th>28</th>
      <td>Roosevelt Island</td>
      <td>0.103448</td>
      <td>0.034483</td>
      <td>0.068966</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.762160</td>
      <td>-73.949168</td>
    </tr>
    <tr>
      <th>31</th>
      <td>Sutton Place</td>
      <td>0.270000</td>
      <td>0.030000</td>
      <td>0.100000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.760280</td>
      <td>-73.963556</td>
    </tr>
    <tr>
      <th>32</th>
      <td>Tribeca</td>
      <td>0.259740</td>
      <td>0.025974</td>
      <td>0.207792</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.721522</td>
      <td>-74.010683</td>
    </tr>
    <tr>
      <th>35</th>
      <td>Upper East Side</td>
      <td>0.288889</td>
      <td>0.022222</td>
      <td>0.100000</td>
      <td>0</td>
      <td>Manhattan</td>
      <td>40.775639</td>
      <td>-73.960508</td>
    </tr>
  </tbody>
</table>
</div>




```python
manhattan_merged.loc[manhattan_merged['Cluster Labels'] == 1, manhattan_merged.columns[list(range(0, manhattan_merged.shape[1]))]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Restarant</th>
      <th>Hotel</th>
      <th>Sites</th>
      <th>Cluster Labels</th>
      <th>Borough</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>Central Harlem</td>
      <td>0.363636</td>
      <td>0.000000</td>
      <td>0.181818</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.815976</td>
      <td>-73.943211</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Chinatown</td>
      <td>0.380000</td>
      <td>0.020000</td>
      <td>0.130000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.715618</td>
      <td>-73.994279</td>
    </tr>
    <tr>
      <th>7</th>
      <td>East Harlem</td>
      <td>0.365854</td>
      <td>0.000000</td>
      <td>0.121951</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.792249</td>
      <td>-73.944182</td>
    </tr>
    <tr>
      <th>8</th>
      <td>East Village</td>
      <td>0.410000</td>
      <td>0.000000</td>
      <td>0.220000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.727847</td>
      <td>-73.982226</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Greenwich Village</td>
      <td>0.400000</td>
      <td>0.000000</td>
      <td>0.120000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.726933</td>
      <td>-73.999914</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Hamilton Heights</td>
      <td>0.372881</td>
      <td>0.000000</td>
      <td>0.152542</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.823604</td>
      <td>-73.949688</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Inwood</td>
      <td>0.385965</td>
      <td>0.000000</td>
      <td>0.122807</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.867684</td>
      <td>-73.921210</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Lenox Hill</td>
      <td>0.320000</td>
      <td>0.000000</td>
      <td>0.080000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.768113</td>
      <td>-73.958860</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Little Italy</td>
      <td>0.330000</td>
      <td>0.020000</td>
      <td>0.060000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.719324</td>
      <td>-73.997305</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Lower East Side</td>
      <td>0.326531</td>
      <td>0.000000</td>
      <td>0.183673</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.717807</td>
      <td>-73.980890</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Manhattan Valley</td>
      <td>0.439024</td>
      <td>0.024390</td>
      <td>0.073171</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.797307</td>
      <td>-73.964286</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Manhattanville</td>
      <td>0.466667</td>
      <td>0.000000</td>
      <td>0.088889</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.816934</td>
      <td>-73.957385</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Midtown South</td>
      <td>0.306122</td>
      <td>0.051020</td>
      <td>0.112245</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.748510</td>
      <td>-73.988713</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Murray Hill</td>
      <td>0.337662</td>
      <td>0.051948</td>
      <td>0.077922</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.748303</td>
      <td>-73.978332</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Noho</td>
      <td>0.390000</td>
      <td>0.020000</td>
      <td>0.090000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.723259</td>
      <td>-73.988434</td>
    </tr>
    <tr>
      <th>29</th>
      <td>Soho</td>
      <td>0.306818</td>
      <td>0.022727</td>
      <td>0.102273</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.722184</td>
      <td>-74.000657</td>
    </tr>
    <tr>
      <th>33</th>
      <td>Tudor City</td>
      <td>0.378378</td>
      <td>0.013514</td>
      <td>0.108108</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.746917</td>
      <td>-73.971219</td>
    </tr>
    <tr>
      <th>34</th>
      <td>Turtle Bay</td>
      <td>0.330000</td>
      <td>0.020000</td>
      <td>0.150000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.752042</td>
      <td>-73.967708</td>
    </tr>
    <tr>
      <th>36</th>
      <td>Upper West Side</td>
      <td>0.404762</td>
      <td>0.011905</td>
      <td>0.166667</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.787658</td>
      <td>-73.977059</td>
    </tr>
    <tr>
      <th>37</th>
      <td>Washington Heights</td>
      <td>0.298851</td>
      <td>0.000000</td>
      <td>0.057471</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.851903</td>
      <td>-73.936900</td>
    </tr>
    <tr>
      <th>38</th>
      <td>West Village</td>
      <td>0.330000</td>
      <td>0.000000</td>
      <td>0.200000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.734434</td>
      <td>-74.006180</td>
    </tr>
    <tr>
      <th>39</th>
      <td>Yorkville</td>
      <td>0.350000</td>
      <td>0.000000</td>
      <td>0.090000</td>
      <td>1</td>
      <td>Manhattan</td>
      <td>40.775930</td>
      <td>-73.947118</td>
    </tr>
  </tbody>
</table>
</div>




```python
manhattan_merged.loc[manhattan_merged['Cluster Labels'] == 2, manhattan_merged.columns[list(range(0, manhattan_merged.shape[1]))]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Neighborhood</th>
      <th>Restarant</th>
      <th>Hotel</th>
      <th>Sites</th>
      <th>Cluster Labels</th>
      <th>Borough</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Battery Park City</td>
      <td>0.075758</td>
      <td>0.060606</td>
      <td>0.212121</td>
      <td>2</td>
      <td>Manhattan</td>
      <td>40.711932</td>
      <td>-74.016869</td>
    </tr>
    <tr>
      <th>30</th>
      <td>Stuyvesant Town</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.285714</td>
      <td>2</td>
      <td>Manhattan</td>
      <td>40.731000</td>
      <td>-73.974052</td>
    </tr>
  </tbody>
</table>
</div>



## Results and Discussion <a name="result"></a>


According to the results of clustering, we can see. First of all, the third category is definitely not our goal, because the number of restaurants and hotels is very small.
Next, let's look at the first and second categories. In the first category, we find that restaurants, hotels and tourist attractions are relatively evenly distributed, but this shows that this area has undergone some development and competition may be fierce. The second type of area also has many equity and tourist attractions, but the number of hotels is relatively small. I think it is a good location to open a new hotel.

## Conclusion <a name="conclusion"></a>

Therefore, this project recommends property developers to capitalize on these findings to open new hotel in neighborhoods in cluster 1 with little to no competition. Property developers with unique selling propositions to stand out from the competition can also open new hotels in neighborhoods in cluster 0 with moderate competition. Lastly, property developers are advised to avoid neighborhoods in cluster 2 which lack of enough catering services.

## References <a name="References"></a>
- Foursquare Developers Documentation.  https://developer.foursquare.com/docs/

